{"version":3,"sources":["../lib/Background/Firefox.js"],"names":[],"mappings":";;AAAA,IAAI,MAAM,YAAA,CAAC;AACX,IAAI,aAAa,YAAA,CAAC;AAClB,IAAI,YAAY,YAAA,CAAC;;;;AAIjB,MAAM,CAAC,OAAO,CAAC,IAAI,GAAG,SAAS,IAAI,GAAG;AACrC,KAAM,eAAe,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC;AACrD,KAAI,eAAe,GAAG,IAAI,eAAe,EAAE,CAAC;;AAE5C,KAAI,eAAe,GAAG,eAAe,CAAC,kBAAkB,EAAE,CAAC;AAC3D,aAAY,GAAG,eAAe,CAAC,kBAAkB,EAAE,CAAC;AACpD,KAAI,IAAI,GAAG,YAAY,CAAC,KAAK,EAAE,CAAC;;AAEhC,QAAO,CAAC,GAAG,CAAC,yBAAyB,GAAG,IAAI,CAAC,CAAC;;AAE9C,gBAAe,CAAC,mBAAmB,EAAE,CAAC,IAAI,CAAC,UAAC,EAAE,EAAK;AAClD,eAAa,GAAG,EAAE,CAAC;AACnB,eAAa,CAAC,MAAM,EAAE,CAAC;AACvB,MAAI,cAAc,GAAG,eAAe,CAAC,oBAAoB,CAAC,aAAa,EAAE,eAAe,EAAE,YAAY,CAAC,CAAC;;AAExG,QAAM,GAAG,eAAe,CAAC,YAAY,EAAE,CAAC;AACxC,MAAI,GAAG,GAAG,eAAe,CAAC,SAAS,CAAC,MAAM,EAAE,cAAc,CAAC,CAAC;EAC5D,CAAC,CAAC;CACH,CAAC;;;;AAIF,OAAO,CAAC,mBAAmB,CAAC,CAAC,IAAI,CAAC,UAAS,MAAM,EAAE;AAClD,KAAI,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,CAAC;AAC5B,KAAI,aAAa,EAAE,aAAa,CAAC,IAAI,EAAE,CAAC;AACxC,KAAI,YAAY,EAAE,YAAY,CAAC,IAAI,EAAE,CAAC;;;CAGtC,CAAC,CAAC","file":"Firefox_Background.js","sourcesContent":["let button;\nlet deviceService;\nlet simpleServer;\n/**\n * extension startup\n */\nmodule.exports.main = function main() {\n\tconst CompositionRoot = require('./CompositionRoot');\n\tlet compositionRoot = new CompositionRoot();\n\n\tlet serviceExecutor = compositionRoot.getServiceExecutor();\n\tsimpleServer = compositionRoot.createSimpleServer();\n\tlet port = simpleServer.start();\n\n\tconsole.log(\"server started on port:\" + port);\n\n\tcompositionRoot.createDeviceService().then((ds) => {\n\t\tdeviceService = ds;\n\t\tdeviceService.search();\n\t\tlet frontEndBridge = compositionRoot.createFrontEndBridge(deviceService, serviceExecutor, simpleServer);\n\n\t\tbutton = compositionRoot.createButton();\n\t\tlet tab = compositionRoot.createTab(button, frontEndBridge);\n\t});\n};\n/**\n * extension shutdown\n */\nrequire(\"sdk/system/unload\").when(function(reason) {\n\tif (button) button.remove();\n\tif (deviceService) deviceService.stop();\n\tif (simpleServer) simpleServer.stop();\n\t//todo: loop over devices and unsubscribe from all events\n\t//check if uninstall/disable, if so remove saved data\n});"]}