{"version":3,"sources":["../lib/Background/Firefox.js"],"names":[],"mappings":";;AAAA,IAAI,MAAM,YAAA,CAAC;AACX,IAAI,aAAa,YAAA,CAAC;AAClB,IAAI,YAAY,YAAA,CAAC;;;;AAIjB,MAAM,CAAC,OAAO,CAAC,IAAI,GAAG,SAAS,IAAI,GAAG;AACrC,KAAM,eAAe,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC;AACrD,KAAI,eAAe,GAAG,IAAI,eAAe,EAAE,CAAC;;AAE5C,KAAI,eAAe,GAAG,eAAe,CAAC,kBAAkB,EAAE,CAAC;AAC3D,aAAY,GAAG,eAAe,CAAC,kBAAkB,EAAE,CAAC;AACpD,KAAI,IAAI,GAAG,YAAY,CAAC,KAAK,EAAE,CAAC;;AAEhC,QAAO,CAAC,GAAG,CAAC,yBAAyB,GAAG,IAAI,CAAC,CAAC;;AAE9C,gBAAe,CAAC,mBAAmB,EAAE,CAAC,IAAI,CAAC,UAAC,EAAE,EAAK;AAClD,eAAa,GAAG,EAAE,CAAC;AACnB,eAAa,CAAC,MAAM,EAAE,CAAC;AACvB,MAAI,cAAc,GAAG,eAAe,CAAC,oBAAoB,CAAC,aAAa,EAAE,eAAe,EAAE,YAAY,CAAC,CAAC;;AAExG,QAAM,GAAG,eAAe,CAAC,YAAY,EAAE,CAAC;AACxC,MAAI,GAAG,GAAG,eAAe,CAAC,SAAS,CAAC,MAAM,EAAE,cAAc,CAAC,CAAC;EAC5D,CAAC,CAAC;CACH,CAAC;;;;AAIF,OAAO,CAAC,mBAAmB,CAAC,CAAC,IAAI,CAAC,UAAS,MAAM,EAAE;AAClD,KAAI,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,CAAC;AAC5B,KAAI,aAAa,EAAE,aAAa,CAAC,IAAI,EAAE,CAAC;AACxC,KAAI,YAAY,EAAE,YAAY,CAAC,IAAI,EAAE,CAAC;;;CAGtC,CAAC,CAAC","file":"Firefox_Background.js","sourcesContent":["let button;\r\nlet deviceService;\r\nlet simpleServer;\r\n/**\r\n * extension startup\r\n */\r\nmodule.exports.main = function main() {\r\n\tconst CompositionRoot = require('./CompositionRoot');\r\n\tlet compositionRoot = new CompositionRoot();\r\n\r\n\tlet serviceExecutor = compositionRoot.getServiceExecutor();\r\n\tsimpleServer = compositionRoot.createSimpleServer();\r\n\tlet port = simpleServer.start();\r\n\r\n\tconsole.log(\"server started on port:\" + port);\r\n\r\n\tcompositionRoot.createDeviceService().then((ds) => {\r\n\t\tdeviceService = ds;\r\n\t\tdeviceService.search();\r\n\t\tlet frontEndBridge = compositionRoot.createFrontEndBridge(deviceService, serviceExecutor, simpleServer);\r\n\r\n\t\tbutton = compositionRoot.createButton();\r\n\t\tlet tab = compositionRoot.createTab(button, frontEndBridge);\r\n\t});\r\n};\r\n/**\r\n * extension shutdown\r\n */\r\nrequire(\"sdk/system/unload\").when(function(reason) {\r\n\tif (button) button.remove();\r\n\tif (deviceService) deviceService.stop();\r\n\tif (simpleServer) simpleServer.stop();\r\n\t//todo: loop over devices and unsubscribe from all events\r\n\t//check if uninstall/disable, if so remove saved data\r\n});"]}