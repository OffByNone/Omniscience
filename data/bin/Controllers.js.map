{"version":3,"sources":["../Controllers/About.js","../Controllers/Capabilities.js","../Controllers/Device.js","../Controllers/DeviceInfo.js","../Controllers/DeviceList.js","../Controllers/Home.js","../Controllers/Index.js","../Controllers/MatchStickSettings.js","../Controllers/Playback.js","../Controllers/Playlist.js"],"names":[],"mappings":"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","file":"Controllers.js","sourcesContent":["﻿window.omniscience.controller('AboutController', function AboutController($scope) {\r\n\t\"use strict\";\r\n\r\n});","﻿window.omniscience.controller('CapabilitiesController', function CapabilitiesController($scope, persistenceService, connectionManagerService) {\r\n\t\"use strict\";\r\n\r\n\t$scope.currentConnectionInfo = {};\r\n\t$scope.currentConnectionIds = {};\r\n\t$scope.protocolInfo = {};\r\n\r\n\t$scope.setProtocolInfoFilter = function (newFilter) {\r\n\t\t$scope.protocolInfoFilter = newFilter;\r\n\t};\r\n\r\n\t$scope.mediums = [];\r\n\r\n\tconnectionManagerService.getCurrentConnectionInfo().then(currentConnectionInfo => $scope.currentConnectionInfo = currentConnectionInfo);\r\n\tfunction parseProtocolInfo(rawProtocolInfo) {\r\n\t\tvar protocolInfo = connectionManagerService.parseProtocolInfo(rawProtocolInfo);\r\n\r\n\t\t$scope.mediums = protocolInfo.map(x => x.contentFormat.medium).filter((value, index, self) => self.indexOf(value) === index); //todo: better/faster/easier way to get unique medium values\r\n\t\t$scope.protocolInfo = protocolInfo;\r\n\t\t$scope.protocolInfo.forEach(item => {\r\n\t\t\titem.additionalInfoFlags = [];\r\n\t\t\tif (item.additionalInfo && typeof item.additionalInfo.flags === \"object\") {\r\n\t\t\t\tfor (var key in item.additionalInfo.flags) {\r\n\t\t\t\t\tif (item.additionalInfo.flags[key])\r\n\t\t\t\t\t\titem.additionalInfoFlags.push(key);\r\n\t\t\t\t}\r\n\t\t\t\tdelete item.additionalInfo.flags;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t$scope.protocolInfoFilter = $scope.mediums[0];\r\n\t}\r\n\r\n\r\n\tconnectionManagerService.subscribe((eventArray) => {\r\n\t\tif (!Array.isArray(eventArray)) return;\r\n\r\n\t\tconsole.log(eventArray);\r\n\r\n\t\teventArray.forEach(eventObj => {\r\n\t\t\tif (eventObj.hasOwnProperty(\"currentconnectioninfo\"))\r\n\t\t\t\t$scope.currentConnectionInfo = eventObj.currentConnectionInfo;\r\n\t\t\tif (eventObj.hasOwnProperty(\"currentconnectionids\"))\r\n\t\t\t\t$scope.currentConnectionIds = eventObj.currentConnectionIds;\r\n\t\t\tif (typeof eventObj.sourceprotocolinfo === \"string\")\r\n\t\t\t\tparseProtocolInfo(eventObj.sourceprotocolinfo);\r\n\t\t\tif (typeof eventObj.sinkprotocolinfo === \"string\")\r\n\t\t\t\tparseProtocolInfo(eventObj.sinkprotocolinfo);\r\n\t\t});\r\n\t}, null);\r\n\r\n\t$scope.$on('$destroy', () => connectionManagerService.unsubscribe());\r\n});\r\n\r\n","window.omniscience.controller('DeviceController', function DeviceController($scope, $routeParams, $rootScope, $timeout, eventService, informationService, subscriptionService) {\r\n    \"use strict\";\r\n\r\n    eventService.emit(\"loadDevices\");\r\n    informationService.init();\r\n    $scope.eventLog = [];\r\n\r\n\t$scope.hasService = function hasService(rawServiceType) {\r\n\t\tif ($scope.device && Array.isArray($scope.device.services))\r\n\t\t\treturn $scope.device.services.some(service => service.type.raw === rawServiceType);\r\n\r\n\t\treturn false;\r\n\t};\r\n\r\n\t$scope.isMatchStick = function isMatchStick() {\r\n\t\tif ($scope.device && $scope.device.model && $scope.device.manufacturer)\r\n\t\t\treturn $scope.device.model.name === \"MatchStick\" && $scope.device.manufacturer.name === \"openflint\";\r\n\r\n\t\treturn false;\r\n\t};\r\n\r\n\tfunction getDevice() {\r\n\t    var device = $rootScope.devices.filter(device => device.id === $routeParams.deviceId)[0];\r\n\t    if (!device) return $timeout(() => getDevice(), 100);\r\n\r\n\t    $scope.device = device || {};\r\n\t    $scope.device.services.forEach(informationService.put);\r\n\t    $scope.device.services\r\n        .filter((service) => {\r\n            try {\r\n                var url = new URL(service.eventSubUrl);\r\n                return url.hostname && url.protocol;\r\n            } catch (error) {\r\n                return false;\r\n            }\r\n        })\r\n        .forEach((service) => subscriptionService.subscribe(service,\r\n\t\t\t\t(subEvents) => $scope.eventLog.push({ timestamp: new Date(Date.now()).toLocaleTimeString(), service, subEvents }),\r\n\t\t\t\t(subEvents) => $scope.eventLog.push({ timestamp: new Date(Date.now()).toLocaleTimeString(), service, subEvents }))\r\n\t\t\t.then((subscriptionId) => service.subscriptionId = subscriptionId));\r\n\t}\r\n\r\n\tgetDevice();\r\n\r\n\t$scope.$on('$destroy', function () {\r\n\t\t$scope.device.services\r\n\t\t\t.filter((service) => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tvar url = new URL(service.eventSubUrl);\r\n\t\t\t\t\treturn url.hostname && url.protocol;\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.forEach((service) => subscriptionService.unsubscribe(service.uuid, service.subscriptionId, service.eventSubUrl));\r\n\t});\r\n});","﻿window.omniscience.controller('DeviceInfoController', function DeviceInfoController($scope) {\r\n\t\"use strict\";\r\n\r\n});","﻿window.omniscience.controller('DeviceListController', function DeviceListController($scope, eventService, $q) {\r\n\t\"use strict\";\r\n\teventService.emit(\"loadDevices\");\r\n\teventService.emit(\"refreshDevices\");\r\n});","window.omniscience.controller('HomeController', function HomeController($scope, eventService) {\r\n\t\"use strict\";\r\n\r\n    eventService.emit(\"loadDevices\");\r\n});","﻿window.omniscience.controller('IndexController', function IndexController($scope, $rootScope, eventService) {\r\n\t\"use strict\";\r\n\r\n\t$rootScope.devices = [];\r\n\t$rootScope.deviceTypes = [];\r\n\t$rootScope.serviceTypes = [];\r\n\t$rootScope.eventLog = [];\r\n\r\n\t$rootScope.refreshDevices = function refreshDevices() {\r\n\t\teventService.emit('refreshDevices');\r\n\t};\r\n\t$rootScope.loadDevices = function loadDevices() {\r\n\t\teventService.emit(\"loadDevices\");\r\n\t};\r\n\r\n\tfunction addUpdateDevice(device) {\r\n\t\tvar found = false;\r\n\t\t$rootScope.devices.forEach(function (scopeDevice) {\r\n\t\t\tif (scopeDevice.id === device.id) {\r\n\t\t\t\tscopeDevice.name = device.name;\r\n\r\n\t\t\t\tdevice.services.forEach(deviceService => {\r\n\t\t\t\t\tvar service = scopeDevice.services.filter(scopeDeviceService => scopeDeviceService.id.raw === deviceService.id.raw && (!scopeDeviceService.scpdUrl || scopeDeviceService.scpdUrl === deviceService.scpdUrl))[0];\r\n\t\t\t\t\t//Match up on Id, but a device could have two services with the same id (should probably make sure that is true),\r\n\t\t\t\t\t//so also match the scpdUrl which means it is effectively the same service\r\n\t\t\t\t\t//but the MatchStick doesn't have an scpdUrl so allow for it to be null\r\n\r\n\t\t\t\t\tif (!service) {\r\n\t\t\t\t\t\tscopeDevice.services.push(deviceService);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (var i in deviceService)\r\n\t\t\t\t\t\tif(deviceService.hasOwnProperty(i) && service[i] !== deviceService[i])\r\n\t\t\t\t\t\t\tservice[i] = deviceService[i];\r\n\t\t\t\t});\r\n\r\n\t\t\t\tfound = true;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (!found)\r\n\t\t\t$rootScope.devices.push(device);\r\n\r\n\t\taddTypes(device);\r\n\t}\r\n\tfunction removeDevice(device) {\r\n\t\tfor (var i = $rootScope.devices.length - 1; i >= 0; i--)\r\n\t\t\tif ($rootScope.devices[i].id === device.id)\r\n\t\t\t\t$rootScope.devices.splice(i, 1);\r\n\r\n\t\tremoveTypes();\r\n\t}\r\n\tfunction addTypes(device) {\r\n\t\tif (!$rootScope.deviceTypes.some(x => x.raw === device.type.raw))\r\n\t\t\t$rootScope.deviceTypes.push(device.type);\r\n\t\tdevice.services.forEach(service => {\r\n\t\t\tif (!$rootScope.serviceTypes.some(x=> x.raw === service.type.raw))\r\n\t\t\t\t$rootScope.serviceTypes.push(service.type);\r\n\t\t});\r\n\t}\r\n\tfunction removeTypes() {\r\n\t\t$rootScope.deviceTypes = $rootScope.deviceTypes.filter(deviceType => $rootScope.devices.some(device => device.type.raw === deviceType.raw));\r\n\t\t$rootScope.serviceTypes = $rootScope.serviceTypes.filter(serviceType => $rootScope.devices.some(device => device.services.some(service => service.type.raw === serviceType.raw)));\r\n\t}\r\n\tfunction eventOccured(device, events, request) {\r\n\t\tif (!events) { console.log(\"event is undefined\"); return; }\r\n\t\tif (Array.isArray(events))\r\n\t\t\tevents.forEach(event => {\r\n\t\t\t\t$rootScope.eventLog.push({ device: device, event: event, request: request });\r\n\t\t\t});\r\n\t}\r\n\r\n\teventService.on('deviceLost', removeDevice);\r\n\teventService.on('deviceFound', addUpdateDevice);\r\n\teventService.on('EventOccured', eventOccured);\r\n});","﻿window.omniscience.controller('MatchStickSettingsController', function MatchStickSettingsController($scope, eventService, matchstickMessageGenerator) {\r\n\t\"use strict\";\r\n\r\n\tvar controlUrl = new URL($scope.device.address);\r\n\tcontrolUrl.port = 8881;\r\n\r\n\tfunction parseResponse(response) {\r\n\t\treturn JSON.parse(response.slice(response.length.toString().length + 1));\r\n\t}\r\n\r\n\t$scope.reboot = function reboot() {\r\n\t\tvar message = matchstickMessageGenerator.build(\"setting\", \"reboot_cast\");\r\n\t\teventService.emit(\"sendTCP\", controlUrl.hostname, controlUrl.port, message, false);\r\n\t};\r\n\t$scope.reset = function reset() {\r\n\t\tvar message = matchstickMessageGenerator.build(\"setting\", \"reset_cast\");\r\n\t\teventService.emit(\"sendTCP\", controlUrl.hostname, controlUrl.port, message, false);\r\n\t};\r\n\t$scope.forgetWifi = function forgetWifi() {\r\n\t\tvar message = matchstickMessageGenerator.build(\"setting\", \"forget_wifi\");\r\n\t\teventService.emit(\"sendTCP\", controlUrl.hostname, controlUrl.port, message, false);\r\n\t};\r\n\r\n\t$scope.getNetworks = function () {\r\n\t\tvar message = matchstickMessageGenerator.build(\"query\", \"ap-list\");\r\n\t\treturn eventService.emit(\"sendTCP\", controlUrl.hostname, controlUrl.port, message, true).then((response) => {\r\n\t\t\tvar responseObj = parseResponse(response);\r\n\r\n\t\t\t$scope.visibleNetworks = responseObj.data.networks;\r\n\t\t\t$scope.eventLog.push({ timestamp: new Date(Date.now()).toLocaleTimeString(), service: { type: { name: \"MatchStick Settings\" } }, subEvents: [responseObj.data] });\r\n\t\t\treturn responseObj;\r\n\t\t});\r\n\t};\r\n\t$scope.getDeviceInfo = function () {\r\n\t\tvar message = matchstickMessageGenerator.build(\"query\", \"device_info\");\r\n\t\treturn eventService.emit(\"sendTCP\", controlUrl.hostname, controlUrl.port, message, true).then((response) => {\r\n\t\t\tvar responseObj = parseResponse(response);\r\n\t\t\t$scope.eventLog.push({ timestamp: new Date(Date.now()).toLocaleTimeString(), service: { type: { name: \"MatchStick Settings\" } }, subEvents: [responseObj.data] });\r\n\r\n\t\t\t$scope.device.language = $scope.languages.filter(language => responseObj.data.language === language.code)[0];\r\n\t\t\t$scope.device.macAddress = responseObj.data.macAddress;\r\n\t\t\t$scope.device.timezone = responseObj.data.timezone;\r\n\t\t\t$scope.device.softwareVersion = responseObj.data.version;\r\n\t\t\treturn responseObj;\r\n\t\t});\r\n\t};\r\n\t$scope.getDeviceInfo2 = function () {\r\n\t\tvar message = matchstickMessageGenerator.build(\"query\", \"device_info_2\");\r\n\t\treturn eventService.emit(\"sendTCP\", controlUrl.hostname, controlUrl.port, message, true).then((response) => {\r\n\t\t\tvar responseObj = parseResponse(response);\r\n\t\t\t$scope.eventLog.push({ timestamp: new Date(Date.now()).toLocaleTimeString(), service: { type: { name: \"MatchStick Settings\" } }, subEvents: [responseObj.data] });\r\n\r\n\t\t\t$scope.device.scale = responseObj.data.ratio*5;\r\n\t\t\t$scope.device.usbMode = responseObj.data.usb;\r\n\t\t\treturn responseObj;\r\n\t\t});\r\n\t};\r\n\t$scope.getTVKeyCode = function () {\r\n\t\tif (!$scope.device.macAddress) return;\r\n\t\tvar message = matchstickMessageGenerator.build(\"query\", \"key_code\", {\r\n\t\t\tap_mac: $scope.device.macAddress,\r\n\t\t\timei: 863985028265716\r\n\t\t});\r\n\t\treturn eventService.emit(\"sendTCP\", controlUrl.hostname, controlUrl.port, message, true)\r\n\t\t\t.then((response) => {\r\n\t\t\t\tvar responseObj = parseResponse(response);\r\n\t\t\t\t$scope.eventLog.push({ timestamp: new Date(Date.now()).toLocaleTimeString(), service: { type: { name: \"MatchStick Settings\" } }, subEvents: [responseObj.data] });\r\n\t\t\t\t$scope.tvKeyCode = responseObj.data.key_code;\r\n\t\t\t\treturn responseObj;\r\n\t\t\t});\r\n\t};\r\n\t$scope.getDeviceScale = function () {\r\n\t\t//ratio between 10 (50%) and 20 (100%)\r\n\t\tvar message = matchstickMessageGenerator.build(\"query\", \"device_scale\");\r\n\t\treturn eventService.emit(\"sendTCP\", controlUrl.hostname, controlUrl.port, message, true).then((response) => {\r\n\t\t\tvar responseObj = parseResponse(response);\r\n\t\t\t$scope.eventLog.push({ timestamp: new Date(Date.now()).toLocaleTimeString(), service: { type: { name: \"MatchStick Settings\" } }, subEvents: [responseObj.data] });\r\n\r\n\t\t\t$scope.device.scale = responseObj.data.ratio*5;\r\n\t\t\treturn responseObj;\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.setName = function setName() {\r\n\t\t//todo: put some kind of a debounce on here so we aren't updating on every keystroke\r\n\t\tvar message = matchstickMessageGenerator.build(\"setting\", \"change_ssid\", { name: $scope.device.name });\r\n\t\teventService.emit(\"sendTCP\", controlUrl.hostname, controlUrl.port, message, false);\r\n\t};\r\n\t$scope.setTimezone = function setTimezone() {\r\n\t\tvar message = matchstickMessageGenerator.build(\"setting\", \"time_zone\", { timezone: $scope.device.timezone });\r\n\t\teventService.emit(\"sendTCP\", controlUrl.hostname, controlUrl.port, message, false);\r\n\t};\r\n\t$scope.setLanguage = function setLanguage() {\r\n\t\tvar message = matchstickMessageGenerator.build(\"setting\", \"language\", { language: $scope.device.language.code });\r\n\t\teventService.emit(\"sendTCP\", controlUrl.hostname, controlUrl.port, message, false);\r\n\t};\r\n\t$scope.setUSBMode = function setUSBMode() {\r\n\t\tvar message = matchstickMessageGenerator.buildv2(\"set_usb_mode\", { usb: $scope.device.usbMode });\r\n\t\teventService.emit(\"sendTCP\", controlUrl.hostname, controlUrl.port, message, false);\r\n\t};\r\n\t$scope.setScale = function setScale() {\r\n\t\tvar message = matchstickMessageGenerator.buildv2('scale', { ratio: $scope.device.scale / 5 });\r\n\t\teventService.emit(\"sendTCP\", controlUrl.hostname, controlUrl.port, message, false);\r\n\t};\r\n\r\n\t$scope.timezones = ['Africa/Abidjan', 'Africa/Accra', 'Africa/Addis_Ababa', 'Africa/Algiers', 'Africa/Asmara', 'Africa/Asmera', 'Africa/Bamako', 'Africa/Bangui', 'Africa/Banjul', 'Africa/Bissau',\r\n\t\t'Africa/Blantyre', 'Africa/Brazzaville', 'Africa/Bujumbura', 'Africa/Cairo', 'Africa/Casablanca', 'Africa/Ceuta', 'Africa/Conakry', 'Africa/Dakar', 'Africa/Dar_es_Salaam', 'Africa/Djibouti',\r\n\t\t'Africa/Douala', 'Africa/El_Aaiun', 'Africa/Freetown', 'Africa/Gaborone', 'Africa/Harare', 'Africa/Johannesburg', 'Africa/Kampala', 'Africa/Khartoum', 'Africa/Kigali', 'Africa/Kinshasa', 'Africa/Lagos',\r\n\t\t'Africa/Libreville', 'Africa/Lome', 'Africa/Luanda', 'Africa/Lubumbashi', 'Africa/Lusaka', 'Africa/Malabo', 'Africa/Maputo', 'Africa/Maseru', 'Africa/Mbabane', 'Africa/Mogadishu', 'Africa/Monrovia',\r\n\t\t'Africa/Nairobi', 'Africa/Ndjamena', 'Africa/Niamey', 'Africa/Nouakchott', 'Africa/Ouagadougou', 'Africa/Porto-Novo', 'Africa/Sao_Tome', 'Africa/Timbuktu', 'Africa/Tripoli', 'Africa/Tunis', 'Africa/Windhoek',\r\n\t\t'America/Adak', 'America/Anchorage', 'America/Anguilla', 'America/Antigua', 'America/Araguaina', 'America/Argentina/Buenos_Aires', 'America/Argentina/Catamarca', 'America/Argentina/ComodRivadavia',\r\n\t\t'America/Argentina/Cordoba', 'America/Argentina/Jujuy', 'America/Argentina/La_Rioja', 'America/Argentina/Mendoza', 'America/Argentina/Rio_Gallegos', 'America/Argentina/San_Juan', 'America/Argentina/Tucuman',\r\n\t\t'America/Argentina/Ushuaia', 'America/Aruba', 'America/Asuncion', 'America/Atikokan', 'America/Atka', 'America/Bahia', 'America/Barbados', 'America/Belem', 'America/Belize', 'America/Blanc-Sablon',\r\n\t\t'America/Boa_Vista', 'America/Bogota', 'America/Boise', 'America/Buenos_Aires', 'America/Cambridge_Bay', 'America/Campo_Grande', 'America/Cancun', 'America/Caracas', 'America/Catamarca', 'America/Cayenne',\r\n\t\t'America/Cayman', 'America/Chicago', 'America/Chihuahua', 'America/Coral_Harbour', 'America/Cordoba', 'America/Costa_Rica', 'America/Cuiaba', 'America/Curacao', 'America/Danmarkshavn', 'America/Dawson',\r\n\t\t'America/Dawson_Creek', 'America/Denver', 'America/Detroit', 'America/Dominica', 'America/Edmonton', 'America/Eirunepe', 'America/El_Salvador', 'America/Ensenada', 'America/Fort_Wayne', 'America/Fortaleza',\r\n\t\t'America/Glace_Bay', 'America/Godthab', 'America/Goose_Bay', 'America/Grand_Turk', 'America/Grenada', 'America/Guadeloupe', 'America/Guatemala', 'America/Guayaquil', 'America/Guyana', 'America/Halifax',\r\n\t\t'America/Havana', 'America/Hermosillo', 'America/Indiana/Indianapolis', 'America/Indiana/Knox', 'America/Indiana/Marengo', 'America/Indiana/Petersburg', 'America/Indiana/Tell_City', 'America/Indiana/Vevay',\r\n\t\t'America/Indiana/Vincennes', 'America/Indiana/Winamac', 'America/Indianapolis', 'America/Inuvik', 'America/Iqaluit', 'America/Jamaica', 'America/Jujuy', 'America/Juneau', 'America/Kentucky/Louisville',\r\n\t\t'America/Kentucky/Monticello', 'America/Knox_IN', 'America/La_Paz', 'America/Lima', 'America/Los_Angeles', 'America/Louisville', 'America/Maceio', 'America/Managua', 'America/Manaus', 'America/Marigot',\r\n\t\t'America/Martinique', 'America/Mazatlan', 'America/Mendoza', 'America/Menominee', 'America/Merida', 'America/Mexico_City', 'America/Miquelon', 'America/Moncton', 'America/Monterrey', 'America/Montevideo',\r\n\t\t'America/Montreal', 'America/Montserrat', 'America/Nassau', 'America/New_York', 'America/Nipigon', 'America/Nome', 'America/Noronha', 'America/North_Dakota/Center', 'America/North_Dakota/New_Salem',\r\n\t\t'America/Panama', 'America/Pangnirtung', 'America/Paramaribo', 'America/Phoenix', 'America/Port-au-Prince', 'America/Port_of_Spain', 'America/Porto_Acre', 'America/Porto_Velho', 'America/Puerto_Rico',\r\n\t\t'America/Rainy_River', 'America/Rankin_Inlet', 'America/Recife', 'America/Regina', 'America/Resolute', 'America/Rio_Branco', 'America/Rosario', 'America/Santiago', 'America/Santo_Domingo', 'America/Sao_Paulo',\r\n\t\t'America/Scoresbysund', 'America/Shiprock', 'America/St_Barthelemy', 'America/St_Johns', 'America/St_Kitts', 'America/St_Lucia', 'America/St_Thomas', 'America/St_Vincent', 'America/Swift_Current',\r\n\t\t'America/Tegucigalpa', 'America/Thule', 'America/Thunder_Bay', 'America/Tijuana', 'America/Toronto', 'America/Tortola', 'America/Vancouver', 'America/Virgin', 'America/Whitehorse', 'America/Winnipeg',\r\n\t\t'America/Yakutat', 'America/Yellowknife', 'Antarctica/Casey', 'Antarctica/Davis', 'Antarctica/DumontDUrville', 'Antarctica/Mawson', 'Antarctica/McMurdo', 'Antarctica/Palmer', 'Antarctica/Rothera',\r\n\t\t'Antarctica/South_Pole', 'Antarctica/Syowa', 'Antarctica/Vostok', 'Arctic/Longyearbyen', 'Asia/Aden', 'Asia/Almaty', 'Asia/Amman', 'Asia/Anadyr', 'Asia/Aqtau', 'Asia/Aqtobe', 'Asia/Ashgabat',\r\n\t\t'Asia/Ashkhabad', 'Asia/Baghdad', '\tAsia/Bahrain', 'Asia/Baku', 'Asia/Bangkok', 'Asia/Beirut', 'Asia/Bishkek', 'Asia/Brunei', 'Asia/Calcutta', 'Asia/Choibalsan', 'Asia/Chongqing', 'Asia/Chungking',\r\n\t\t'Asia/Colombo', 'Asia/Dacca', 'Asia/Damascus', 'Asia/Dhaka', 'Asia/Dili', 'Asia/Dubai', 'Asia/Dushanbe', 'Asia/Gaza', 'Asia/Harbin', 'Asia/Hong_Kong', 'Asia/Hovd', 'Asia/Irkutsk', 'Asia/Istanbul',\r\n\t\t'Asia/Jakarta', 'Asia/Jayapura', 'Asia/Jerusalem', 'Asia/Kabul', 'Asia/Kamchatka', 'Asia/Karachi', 'Asia/Kashgar', 'Asia/Katmandu', 'Asia/Krasnoyarsk', 'Asia/Kuala_Lumpur', 'Asia/Kuching', 'Asia/Kuwait',\r\n\t\t'Asia/Macao', 'Asia/Macau', 'Asia/Magadan', 'Asia/Makassar', 'Asia/Manila', 'Asia/Muscat', 'Asia/Nicosia', 'Asia/Novosibirsk', 'Asia/Omsk', 'Asia/Oral', 'Asia/Phnom_Penh', 'Asia/Pontianak', 'Asia/Pyongyang',\r\n\t\t'Asia/Qatar', 'Asia/Qyzylorda', 'Asia/Rangoon', 'Asia/Riyadh', 'Asia/Riyadh87', 'Asia/Riyadh88', 'Asia/Riyadh89', 'Asia/Saigon', 'Asia/Sakhalin', 'Asia/Samarkand', 'Asia/Seoul', 'Asia/Shanghai',\r\n\t\t'Asia/Singapore', 'Asia/Taipei', 'Asia/Tashkent', 'Asia/Tbilisi', 'Asia/Tehran', 'Asia/Tel_Aviv', 'Asia/Thimbu', 'Asia/Thimphu', 'Asia/Tokyo', 'Asia/Ujung_Pandang', 'Asia/Ulaanbaatar', 'Asia/Ulan_Bator',\r\n\t\t'Asia/Urumqi', 'Asia/Vientiane', 'Asia/Vladivostok', 'Asia/Yakutsk', 'Asia/Yekaterinburg', 'Asia/Yerevan', 'Atlantic/Azores', 'Atlantic/Bermuda', 'Atlantic/Canary', 'Atlantic/Cape_Verde', 'Atlantic/Faeroe',\r\n\t\t'Atlantic/Faroe', 'Atlantic/Jan_Mayen', 'Atlantic/Madeira', 'Atlantic/Reykjavik', 'Atlantic/South_Georgia', 'Atlantic/St_Helena', 'Atlantic/Stanley', 'Australia/ACT', 'Australia/Adelaide',\r\n\t\t'Australia/Brisbane', 'Australia/Broken_Hill', 'Australia/Canberra', 'Australia/Currie', 'Australia/Darwin', 'Australia/Eucla', 'Australia/Hobart', 'Australia/LHI', 'Australia/Lindeman',\r\n\t\t'Australia/Lord_Howe', 'Australia/Melbourne', 'Australia/NSW', 'Australia/North', 'Australia/Perth', 'Australia/Queensland', 'Australia/South', 'Australia/Sydney', 'Australia/Tasmania',\r\n\t\t'Australia/Victoria', 'Australia/West', '\tAustralia/Yancowinna', 'Brazil/Acre', 'Brazil/DeNoronha', 'Brazil/East', 'Brazil/West', 'CET', 'CST6CDT', 'Canada/Atlantic', 'Canada/Central',\r\n\t\t'Canada/East-Saskatchewan', 'Canada/Eastern', 'Canada/Mountain', 'Canada/Newfoundland', 'Canada/Pacific', 'Canada/Saskatchewan', 'Canada/Yukon', 'Chile/Continental', 'Chile/EasterIsland', 'Cuba', 'EET',\r\n\t\t'EST', 'EST5EDT', 'Egypt', 'Eire', 'Etc/GMT', 'Etc/GMT+0', 'Etc/GMT+1', 'Etc/GMT+10', 'Etc/GMT+11', 'Etc/GMT+12', 'Etc/GMT+2', 'Etc/GMT+3', 'Etc/GMT+4', 'Etc/GMT+5', 'Etc/GMT+6', 'Etc/GMT+7', 'Etc/GMT+8',\r\n\t\t'Etc/GMT+9', 'Etc/GMT-0', 'Etc/GMT-1', 'Etc/GMT-10', 'Etc/GMT-11', 'Etc/GMT-12', 'Etc/GMT-13', 'Etc/GMT-14', 'Etc/GMT-2', 'Etc/GMT-3', 'Etc/GMT-4', 'Etc/GMT-5', 'Etc/GMT-6', 'Etc/GMT-7', 'Etc/GMT-8',\r\n\t\t'Etc/GMT-9', 'Etc/GMT0', 'Etc/Greenwich', 'Etc/UCT', 'Etc/UTC', 'Etc/Universal', 'Etc/Zulu', 'Europe/Amsterdam', 'Europe/Andorra', 'Europe/Athens', 'Europe/Belfast', 'Europe/Belgrade', 'Europe/Berlin',\r\n\t\t'Europe/Bratislava', 'Europe/Brussels', 'Europe/Bucharest', 'Europe/Budapest', 'Europe/Chisinau', 'Europe/Copenhagen', 'Europe/Dublin', 'Europe/Gibraltar', 'Europe/Guernsey', 'Europe/Helsinki',\r\n\t\t'Europe/Isle_of_Man', 'Europe/Istanbul', 'Europe/Jersey', 'Europe/Kaliningrad', 'Europe/Kiev', 'Europe/Lisbon', 'Europe/Ljubljana', 'Europe/London', 'Europe/Luxembourg', 'Europe/Madrid', 'Europe/Malta',\r\n\t\t'Europe/Mariehamn', 'Europe/Minsk', 'Europe/Monaco', 'Europe/Moscow', 'Europe/Nicosia', 'Europe/Oslo', 'Europe/Paris', 'Europe/Podgorica', 'Europe/Prague', 'Europe/Riga', 'Europe/Rome', 'Europe/Samara',\r\n\t\t'Europe/San_Marino', 'Europe/Sarajevo', 'Europe/Simferopol', 'Europe/Skopje', 'Europe/Sofia', 'Europe/Stockholm', 'Europe/Tallinn', 'Europe/Tirane', 'Europe/Tiraspol', 'Europe/Uzhgorod', 'Europe/Vaduz',\r\n\t\t'Europe/Vatican', 'Europe/Vienna', 'Europe/Vilnius', '\tEurope/Volgograd', 'Europe/Warsaw', 'Europe/Zagreb', 'Europe/Zaporozhye', 'Europe/Zurich', 'Factory', 'GB', 'GB-Eire', 'GMT', 'GMT+0', 'GMT-0',\r\n\t\t'GMT0', 'Greenwich', 'HST', 'Hongkong', 'Iceland', 'Indian/Antananarivo', 'Indian/Chagos', 'Indian/Christmas', 'Indian/Cocos', 'Indian/Comoro', 'Indian/Kerguelen', 'Indian/Mahe', 'Indian/Maldives',\r\n\t\t'Indian/Mauritius', 'Indian/Mayotte', 'Indian/Reunion', 'Iran', 'Israel', 'Jamaica', 'Japan', 'Kwajalein', 'Libya', 'MET', 'MST', 'MST7MDT', 'Mexico/BajaNorte', 'Mexico/BajaSur', 'Mexico/General',\r\n\t\t'Mideast/Riyadh87', 'Mideast/Riyadh88', 'Mideast/Riyadh89', 'NZ', 'NZ-CHAT', 'Navajo', 'PRC', 'PST8PDT', 'Pacific/Apia', 'Pacific/Auckland', 'Pacific/Chatham', 'Pacific/Easter', 'Pacific/Efate',\r\n\t\t'Pacific/Enderbury', 'Pacific/Fakaofo', 'Pacific/Fiji', 'Pacific/Funafuti', 'Pacific/Galapagos', 'Pacific/Gambier', 'Pacific/Guadalcanal', 'Pacific/Guam', 'Pacific/Honolulu', 'Pacific/Johnston',\r\n\t\t'Pacific/Kiritimati', 'Pacific/Kosrae', 'Pacific/Kwajalein', 'Pacific/Majuro', 'Pacific/Marquesas', 'Pacific/Midway', 'Pacific/Nauru', 'Pacific/Niue', 'Pacific/Norfolk', 'Pacific/Noumea',\r\n\t\t'Pacific/Pago_Pago', 'Pacific/Palau', 'Pacific/Pitcairn', 'Pacific/Ponape', 'Pacific/Port_Moresby', 'Pacific/Rarotonga', 'Pacific/Saipan', 'Pacific/Samoa', 'Pacific/Tahiti', 'Pacific/Tarawa',\r\n\t\t'Pacific/Tongatapu', 'Pacific/Truk', 'Pacific/Wake', 'Pacific/Wallis', 'Pacific/Yap', 'Poland', 'Portugal', 'ROC', 'ROK', 'Singapore', 'Turkey', 'UCT', 'US/Alaska', 'US/Aleutian', 'US/Arizona',\r\n\t\t'US/Central', 'US/East-Indiana', 'US/Eastern', 'US/Hawaii', 'US/Indiana-Starke', 'US/Michigan', 'US/Mountain', 'US/Pacific', 'US/Pacific-New', 'US/Samoa', 'UTC', 'Universal', 'W-SU', 'WET', 'Zulu'];\r\n\t$scope.languages = [\r\n\t\t{ name: 'English', code: 'en-US' },\r\n\t\t{ name: 'Chinese', code: 'zh-CN' }\r\n\t];\r\n\t$scope.usbModes = ['ADB', 'OTG'];\r\n\r\n\t$scope.getDeviceInfo().then(() => $scope.getTVKeyCode());\r\n\t$scope.getDeviceInfo2();\r\n\t$scope.getNetworks();\r\n\r\n\t//todo: the below three aren't wired up and therefore are untested.  test and wire them up\r\n\t$scope.setWiFi = function setWiFi(wifiSettings) {\r\n\t\t//todo: validate that this actually works, then put something in the UI so it can be used.\r\n\t\tvar message = matchstickMessageGenerator.build(\"setting\", \"wifi\", {\r\n\t\t\t\"wifi-hidden\": network.isHidden,\r\n\t\t\t\"wifi-password\": network.password,\r\n\t\t\t\"wifi-type\": network.securityType,\r\n\t\t\t\"wifi-name\": network.ssid,\r\n\t\t\t\"wifi-bssid\": network.routerMac\r\n\t\t});\r\n\t\teventService.emit(\"sendTCP\", controlUrl.hostname, controlUrl.port, message, false);\r\n\t};\r\n\t$scope.setTime = function setTime(time) {\r\n\t\t//todo: fix me or delete me.  Need to look up what format the time should be in.  Should be able to find in ConnectionService.js\r\n\t\tvar message = matchstickMessageGenerator.build(\"setting\", \"time_set\", { time });\r\n\t\teventService.emit(\"sendTCP\", controlUrl.hostname, controlUrl.port, message, false);\r\n\t};\r\n\t$scope.register = function () {\r\n\t\t//todo: figure out what this is for\r\n\t\tvar data = {\r\n\t\t\tdata: { name: \"wifi-setting\" },\r\n\t\t\tmessage_type: \"register\",\r\n\t\t\tmeta: { reply: false /*, connection_mode: \"single\"*/ },\r\n\t\t\tprotocol_version: \"1.0\"\r\n\t\t};\r\n\t\teventService.emit(\"sendTCP\", controlUrl.hostname, controlUrl.port, data, false);\r\n\t};\r\n});","window.omniscience.controller('PlaybackController', function playbackController($scope, $interval, eventService, avTransportService, renderingControlService, pubSub) {\r\n\t\"use strict\";\r\n\r\n\t$scope.availableActions = [\"play\"];\r\n\t$scope.currentTransportActions = {};\r\n\t$scope.deviceCapabilities = {};\r\n\t$scope.transportSettings = {};\r\n\t$scope.transportInfo = {};\r\n\t$scope.record = {};\r\n\t$scope.presets = [];\r\n\t$scope.currentTrack = {};\r\n\t$scope.currentMedia = {};\r\n\t$scope.nextMedia = {};\r\n\t$scope.playback = {state: \"stopped\"};\r\n\t$scope.volume = 100;\r\n\t$scope.isMuted = false;\r\n\r\n\t$scope.toggleMute = function toggleMute() {\r\n\t\tsetMute(!$scope.isMuted);\r\n\t};\r\n\t$scope.incrementVolume = function incrementVolume() {\r\n\t\tsetVolume( Number($scope.volume) + 1);\r\n\t};\r\n\t$scope.decrementVolume = function decrementVolume() {\r\n\t\tsetVolume( Number($scope.volume) - 1);\r\n\t};\r\n\t$scope.percentComplete = function percentComplete() {\r\n\t\treturn ($scope.currentTrack.currentSeconds / $scope.currentTrack.totalSeconds) * 100;\r\n\t};\r\n\t$scope.stop = function(){\r\n\t\tpubSub.pub(\"stop\");\r\n\t};\r\n\t$scope.play = function(){\r\n\t\tpubSub.pub(\"play\");\r\n\t};\r\n\t$scope.pause = function(){\r\n\t\tpubSub.pub(\"pause\");\r\n\t};\r\n\t$scope.next = function(abideByRepeat){\r\n\t\tpubSub.pub(\"next\", abideByRepeat);\r\n\t};\r\n\t$scope.previous = function(){\r\n\t\tpubSub.pub(\"previous\");\r\n\t};\r\n\r\n\tfunction updatePlaybackState(newState) {\r\n\t\t$scope.playback.state = newState;\r\n\t}\r\n\r\n\tfunction setVolume (newVolume) {\r\n\t\t$scope.volume = newVolume;\r\n\t\trenderingControlService.setVolume(newVolume);\r\n\t}\r\n\tfunction setMute (mute) {\r\n\t\t$scope.isMuted = mute\r\n\t\trenderingControlService.setMute(mute);\r\n\t}\r\n\tfunction fractionToFloat(fraction) {\r\n\t\tvar y = fraction.split(' ');\r\n\t\tif (y.length > 1) {\r\n\t\t\tvar z = y[1].split('/');\r\n\t\t\treturn (+y[0] + (z[0] / z[1]));\r\n\t\t}\r\n\t\telse {\r\n\t\t\tvar z = y[0].split('/');\r\n\t\t\tif (z.length > 1) return (z[0] / z[1]);\r\n\t\t\telse return z[0];\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getNameFromUrl(url) {\r\n\t\ttry{\r\n\t\t\tif (!(url instanceof URL)) url = new URL(url);\r\n\t\t} catch(e)\r\n\t\t{\r\n\t\t\treturn '';\r\n\t\t}\r\n\r\n\t\treturn decodeURI(url.pathname.replace(/^.*(\\\\|\\/|\\:)/, ''));\r\n\t}\r\n\r\n\tfunction secondsToMinutes(duration){\r\n\t\tvar minutesPart = parseInt(duration/60);\r\n\t\tvar secondsPart = duration%60;\r\n\r\n\t\tif( secondsPart.toString().length === 1 ) secondsPart = \"0\" + secondsPart;\r\n\r\n\t\treturn minutesPart + \":\" + secondsPart;\r\n\t}\r\n\tfunction durationToSeconds(duration){\r\n\t\t//[+-]H+:MM:SS[.F+] or H+:MM:SS[.F0/F1]\r\n\t\t//H+ means one or more digits to indicate elapsed hours\r\n\t\t//MM means exactly 2 digits to indicate minutes (00 to 59)\r\n\t\t//SS means exactly 2 digits to indicate seconds (00 to 59)\r\n\t\t//[.F+] means optionally a dot followed by one or more digits to indicate fractions of seconds\r\n\t\t//[.F0/F1] means optionally a dot followed by a fraction, with F0 and F1 at least one digit long, and F0 < F1\r\n\r\n\t\tif(duration.toLowerCase() === \"not_implemented\") return 0;\r\n\r\n\t\tduration = duration.replace(/[\\+\\-]/g,\"\"); //remove any + or -\r\n\t\tduration = duration.replace(/\\.*/,\"\"); //remove any fractional seconds\r\n\r\n\t\tvar [ hours, minutes, seconds ] = duration.split(':');\r\n\r\n\t\treturn parseInt(seconds) + (parseInt(minutes) * 60) + (parseInt(hours) * 3600);\r\n\t}\r\n\tfunction parseDLNATime(duration){\r\n\t\tvar timeInSeconds = durationToSeconds(duration);\r\n\t\treturn { seconds: timeInSeconds, minutes: secondsToMinutes(timeInSeconds) };\r\n\t}\r\n\r\n\tfunction parsePositionInfo(response) {\r\n\t\tvar current = parseDLNATime(response.RelTime);\r\n\t\tvar total = parseDLNATime(response.TrackDuration);\r\n\r\n\t\t$scope.currentTrack.currentSeconds = current.seconds;\r\n\t\t$scope.currentTrack.currentMinutes = current.minutes;\r\n\t\t$scope.currentTrack.totalSeconds = total.seconds;\r\n\t\t$scope.currentTrack.totalMinutes = total.minutes;\r\n\t\t$scope.currentTrack.uri = response.TrackURI;\r\n\t\t$scope.currentTrack.name = getNameFromUrl(response.TrackURI);\r\n\t\t$scope.currentTrack.metadata = response.TrackMetaData;\r\n\t}\r\n\tfunction parseRenderControlLastChangeEvent(lastChangeEvent){\r\n\t\tif(lastChangeEvent.hasOwnProperty(\"Mute\")) $scope.isMuted = lastChangeEvent.Mute === \"1\" || lastChangeEvent.Mute === \"true\";\r\n\t\tif(lastChangeEvent.hasOwnProperty('Volume')) $scope.volume = parseInt(lastChangeEvent.Volume);\r\n\t\tif(lastChangeEvent.hasOwnProperty('PresetNameList')) $scope.presets = lastChangeEvent.PresetNameList.split(\",\");\r\n\t}\r\n\tfunction parseAVTransportLastChangeEvent(lastChangeEvent){\r\n\t\t//The first time a last change event returns it sends back all possible properties with their current values\r\n\t\t//after that it sends whichever properties changed since the last time.  Thus we cannot predict which properties\r\n\t\t//will exist and which will be null\r\n\r\n\t\tif(lastChangeEvent.hasOwnProperty(\"AVTransportURI\")) $scope.currentMedia.uri = lastChangeEvent.AVTransportURI;\r\n\t\tif(lastChangeEvent.hasOwnProperty('AVTransportURIMetaData')) $scope.currentMedia.metadata = lastChangeEvent.AVTransportURIMetaData;\r\n\t\tif(lastChangeEvent.hasOwnProperty('CurrentPlayMode')) $scope.playback.mode = lastChangeEvent.CurrentPlayMode;\r\n\t\tif(lastChangeEvent.hasOwnProperty(\"CurrentRecordQualityMode\")) $scope.record.currentQualityMode = lastChangeEvent.CurrentRecordQualityMode;\r\n\t\tif(lastChangeEvent.hasOwnProperty('CurrentTrack')) $scope.currentTrack.trackNumber = lastChangeEvent.CurrentTrack;\r\n\t\tif(lastChangeEvent.hasOwnProperty('CurrentTrackMetaData')) $scope.currentTrack.metadata = lastChangeEvent.CurrentTrackMetaData;\r\n\t\tif(lastChangeEvent.hasOwnProperty('CurrentTransportActions')) $scope.availableActions = lastChangeEvent.CurrentTransportActions.split(\",\");\r\n\t\tif(lastChangeEvent.hasOwnProperty(\"NumberOfTracks\")) $scope.currentMedia.trackCount = lastChangeEvent.NumberOfTracks;\r\n\t\tif(lastChangeEvent.hasOwnProperty(\"PlaybackStorageMedium\")) $scope.playback.storageMedium = lastChangeEvent.PlaybackStorageMedium;\r\n\t\tif(lastChangeEvent.hasOwnProperty(\"PossiblePlaybackStorageMedia\")) $scope.playback.possibleStorageMedia = lastChangeEvent.PossiblePlaybackStorageMedia;\r\n\t\tif(lastChangeEvent.hasOwnProperty(\"PossibleRecordStorageMedia\")) $scope.record.possilbeStorageMedium = lastChangeEvent.PossibleRecordStorageMedia;\r\n\t\tif(lastChangeEvent.hasOwnProperty(\"PossibleRecordQualityModes\")) $scope.record.possibleQualityModes = lastChangeEvent.PossibleRecordQualityModes;\r\n\t\tif(lastChangeEvent.hasOwnProperty(\"NextAVTransportURI\")) $scope.nextMedia.uri = lastChangeEvent.NextAVTransportURI;\r\n\t\tif(lastChangeEvent.hasOwnProperty(\"NextAVTransportURIMetaData\")) $scope.nextMedia.metadata = lastChangeEvent.NextAVTransportURIMetaData;\r\n\t\tif(lastChangeEvent.hasOwnProperty(\"RecordMediumWriteStatus\")) $scope.record.mediumWriteStatus = lastChangeEvent.RecordMediumWriteStatus;\r\n\t\tif(lastChangeEvent.hasOwnProperty(\"RecordStorageMedium\")) $scope.record.storageMedium = lastChangeEvent.RecordStorageMedium;\r\n\t\tif(lastChangeEvent.hasOwnProperty('TransportStatus')) $scope.playback.status = lastChangeEvent.TransportStatus;\r\n\t\t// Supported speeds can be retrieved from the AllowedValueList of this state variable in the AVTransport service description.\r\n\t\t// 1 is required, 0 is not allowed.\r\n\t\t//Example values are '1', '1/2', '2', '-1', '1/10', etc\r\n\t\tif(lastChangeEvent.hasOwnProperty('TransportPlaySpeed')) $scope.playback.speed = fractionToFloat(lastChangeEvent.TransportPlaySpeed);\r\n\r\n\t\tif(lastChangeEvent.hasOwnProperty('CurrentTrackDuration')){\r\n\t\t\tvar trackTotal = parseDLNATime(lastChangeEvent.CurrentTrackDuration);\r\n\t\t\t$scope.currentTrack.totalTime = trackTotal.minutes;\r\n\t\t\t$scope.currentTrack.totalSeconds = trackTotal.seconds;\r\n\t\t}\r\n\t\tif(lastChangeEvent.hasOwnProperty('CurrentMediaDuration')){\r\n\t\t\tvar mediaTotal = parseDLNATime(lastChangeEvent.CurrentMediaDuration);\r\n\t\t\t$scope.currentMedia.totalTime = mediaTotal.minutes;\r\n\t\t\t$scope.currentMedia.totalSeconds = mediaTotal.seconds;\r\n\t\t}\r\n        if(lastChangeEvent.hasOwnProperty('TransportState')) {\r\n            if (lastChangeEvent.TransportState.toLowerCase() === 'stopped' && $scope.playback.state.toLowerCase() === 'playing') {\r\n                //we are at the end of the song and currently playing. Play next song\r\n                //todo: having two computers on the same network on the same device will be an issue here\r\n                $scope.next(true);\r\n            }\r\n\t\t\tupdatePlaybackState(lastChangeEvent.TransportState);\r\n\t\t}\r\n\t\tif(lastChangeEvent.hasOwnProperty('CurrentTrackURI')) {\r\n\t\t\t$scope.currentTrack.uri = lastChangeEvent.CurrentTrackURI;\r\n\t\t\t$scope.currentTrack.name = getNameFromUrl(lastChangeEvent.CurrentTrackURI);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t$scope.$on('keydown', function (notSureWhatThisIs, event) {\r\n\t\tif (event.target.tagName.toLowerCase() === \"input\") return;\r\n\r\n\t\tswitch (event.key.toLowerCase()) {\r\n\t\t\tcase \" \":\r\n\t\t\t\tif ($scope.playback.state === \"playing\") $scope.pause();\r\n\t\t\t\telse $scope.play();;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"arrowright\":\r\n\t\t\t\t$scope.next(false);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"arrowleft\":\r\n\t\t\t\t$scope.previous();\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"delete\":\r\n\t\t\t\tpubSub.pub('removeCurrent');\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\r\n\r\n\r\n\tavTransportService.subscribe(null, (response) => {\r\n\t\tresponse.forEach(parseAVTransportLastChangeEvent)\r\n\t});\r\n\trenderingControlService.subscribe(null, (response) => {\r\n\t\tresponse.forEach(parseRenderControlLastChangeEvent)\r\n\t});\r\n\r\n\r\n\t//var interval = $interval(() => avTransportService.getPositionInfo().then((response) => parsePositionInfo(response)), 1000);\r\n\r\n\t$scope.$on('$destroy', () => {\r\n\t\trenderingControlService.unsubscribe();\r\n\t\tavTransportService.unsubscribe();\r\n\t\t//$interval.cancel(interval);\r\n\t});\r\n\r\n\tpubSub.sub(\"updatePlaybackState\", updatePlaybackState, $scope);\r\n});","﻿window.omniscience.controller('PlaylistController', function PlaylistController($scope, $timeout, avTransportService, fileService, pubSub) {\r\n\t\"use strict\";\r\n\r\n\t$scope.filePickerisOpen = true;\r\n\t$scope.filePicker = {};\r\n\t$scope.repeat = false;\r\n\t$scope.playlist = [];\r\n\t$scope.slideshow = { duration: 10000, timeout: null };\r\n\t$scope.currentFile = {};\r\n\r\n\t$scope.play = function play(file) {\r\n\t\tpauseSlideshow();\r\n\t\tpubSub.pub(\"updatePlaybackState\", \"playing\");\r\n\t\tif (file)\r\n\t\t\tload(file).then(() => avTransportService.play());\r\n\t\telse\r\n\t\t\tavTransportService.play();\r\n\r\n\t\t//set timeout for image $scope.slideshow\r\n\t\tif ($scope.currentFile.type && $scope.currentFile.type.indexOf(\"image/\") == 0) startSlideshow();\r\n\t};\r\n\t$scope.pause = function pause() {\r\n\t\tpubSub.pub(\"updatePlaybackState\", \"paused\");\r\n\t\tavTransportService.pause();\r\n\t\tpauseSlideshow();\r\n\t};\r\n\t$scope.stop = function stop() {\r\n\t\tpubSub.pub(\"updatePlaybackState\", \"stopped\");\r\n\t\tpauseSlideshow();\r\n\t\treturn avTransportService.stop();\r\n\t};\r\n\t$scope.previous = function previous() {\r\n\t\tvar previousTrack = $scope.playlist[$scope.playlist.length - 1];\r\n\t\tfor (var i = 0; i < $scope.playlist.length; i++) {\r\n\t\t\tif ($scope.playlist[i] === $scope.currentFile) return $scope.play(previousTrack);\r\n\t\t\tpreviousTrack = $scope.playlist[i];\r\n\t\t}\r\n\t}\r\n\t$scope.next = function next(abideByRepeat) {\r\n\t\tfor (var i = 0; i < $scope.playlist.length; i++) {\r\n\t\t\tif ($scope.playlist[i] === $scope.currentFile)\r\n\t\t\t\tif (i == $scope.playlist.length - 1)\r\n\t\t\t\t\tif (!abideByRepeat || $scope.repeat) return $scope.play($scope.playlist[0]); //we are the last file and either pushed the next button, or repeat is enabled, so play the first file\r\n\t\t\t\t\telse {//we are the last file, didn't push the button and repeat is not enabled.  Stop playback, then load the first file\r\n\t\t\t\t\t\t$scope.stop().then(() => load($scope.playlist[0]));\r\n\t\t\t\t\t}\r\n\t\t\t\telse return $scope.play($scope.playlist[Number(i) + 1]); //we are not the last file so play the next\r\n\t\t}\r\n\t};\r\n\t$scope.add = function add(playImmediately) {\r\n\t\t//Adds files to playlist from file picker box and returns the added files\r\n\t\tvar files = getChosenFiles();\r\n\t\tfiles.forEach(file => $scope.playlist.push(file));\r\n\r\n\t\tif (playImmediately) $scope.play(files[0]);\r\n\r\n\t\treturn files;\r\n\t};\r\n\t$scope.clear = function clear() {\r\n\t\t$scope.playlist.length = 0; //setting to [] will not clear out other references to this array.\r\n\t\t$scope.stop();\r\n\t};\r\n\t$scope.randomize = function randomize() {\r\n\t\tshuffle($scope.playlist);\r\n\t};\r\n\t$scope.remove = function remove(file) {\r\n\t\tfor (var i = 0; i < $scope.playlist.length; i++)\r\n\t\t\tif ($scope.playlist[i] === file) {\r\n\t\t\t\tif (file === $scope.currentFile) {\r\n\t\t\t\t\tif ($scope.playlist.length > 1) $scope.next(true); //more files in $scope.playlist, play next\r\n\t\t\t\t\telse $scope.stop(); //only file in $scope.playlist, stop playback\r\n\t\t\t\t}\r\n\t\t\t\t$scope.playlist.splice(i, 1);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t};\r\n\t$scope.removeCurrent = function() {\r\n\t\tif ($scope.currentFile) $scope.remove($scope.currentFile);\r\n\t}\r\n\tfunction shuffle(array) {\r\n\t\t///Fisher–Yates Shuffle\r\n\t\tvar currentIndex = array.length, temporaryValue, randomIndex;\r\n\r\n\t\t// While there remain elements to shuffle\r\n\t\twhile (0 !== currentIndex) {\r\n\t\t\t// Pick a remaining element\r\n\t\t\trandomIndex = Math.floor(Math.random() * currentIndex);\r\n\t\t\tcurrentIndex -= 1;\r\n\r\n\t\t\t// And swap it with the current element\r\n\t\t\ttemporaryValue = array[currentIndex];\r\n\t\t\tarray[currentIndex] = array[randomIndex];\r\n\t\t\tarray[randomIndex] = temporaryValue;\r\n\t\t}\r\n\r\n\t\treturn array;\r\n\t}\r\n\tfunction startSlideshow() {\r\n\t\t$scope.slideshow.timeout = $timeout(() => $scope.next(true), $scope.slideshow.duration);\r\n\t}\r\n\tfunction pauseSlideshow() {\r\n\t\tif ($scope.slideshow.timeout) $timeout.cancel($scope.slideshow.timeout);\r\n\t}\r\n\r\n\t$scope.browseLocalFiles = function () {\r\n\t\tfileService.chooseFiles().then(files => setNewFiles(files));\r\n\t}\r\n\r\n\tfunction getChosenFiles() {\r\n\t\t//todo: pull in the file info - such as duration, artist, song/video name\r\n\t\tvar files = [];\r\n\r\n\t\tif ($scope.filePicker.urlPath && $scope.filePicker.urlPath.length > 0) {\r\n\t\t\ttry {\r\n\t\t\t\tnew URL($scope.filePicker.urlPath);\r\n\t\t\t}\r\n\t\t\tcatch (e) {\r\n\t\t\t\t//todo: invalid url should report that to user and abort\r\n\t\t\t}\r\n\t\t\t$scope.filePicker.url = {\r\n\t\t\t\tpath: $scope.filePicker.urlPath,\r\n\t\t\t\tname: $scope.filePicker.urlPath.replace(/^.*(\\\\|\\/|\\:)/, '')//set file name from url\r\n\t\t\t};\r\n\r\n\t\t\tfiles.push($scope.filePicker.url);\r\n\t\t}\r\n\t\telse if ($scope.filePicker.localFiles && $scope.filePicker.localFiles.length > 0)\r\n\t\t\tfiles = $scope.filePicker.localFiles;\r\n\t\telse return []; //no files are selected and url isn't set so don't do anything, just return\r\n\r\n\t\t$scope.filePicker = {}; //clear out the url and local file fields\r\n\r\n\t\treturn files;\r\n\t}\r\n\tfunction setNewFiles(files) {\r\n\t\tif (Array.isArray(files))\r\n\t\t\tfiles.forEach(file => file.isLocal = true);\r\n\r\n\t\t$scope.filePicker.localFiles = files;\r\n\r\n\t\tif (files == null || files.length == 0) { // no files selected\r\n\t\t\t$scope.filePicker.localFileText = \"\";\r\n\t\t\t$scope.filePicker.paths = \"\";\r\n\t\t}\r\n\t\telse if (files.length == 1) { // one file selected\r\n\t\t\t$scope.filePicker.localFileText = files[0].path;\r\n\t\t\t$scope.filePicker.paths = \"\";\r\n\t\t}\r\n\t\telse {  // multiple files selected\r\n\t\t\t$scope.filePicker.localFileText = \"Multiple Files Selected\";\r\n\t\t\t$scope.filePicker.paths = files.map(file => file.path).join(\"\\n\");\r\n\t\t}\r\n\t}\r\n\tfunction load(file) {\r\n\t\t$scope.currentFile = file\r\n\t\treturn fileService.shareFile(file, avTransportService.getServerIP()).then(fileUri => {\r\n\t\t\treturn avTransportService.setAvTransportUri(fileUri, \"\");\r\n\t\t});\r\n\t}\r\n\r\n\tpubSub.sub(\"removeCurrent\", $scope.removeCurrent, $scope);\r\n\tpubSub.sub(\"play\", $scope.play, $scope);\r\n\tpubSub.sub(\"stop\", $scope.stop, $scope);\r\n\tpubSub.sub(\"pause\", $scope.pause, $scope);\r\n\tpubSub.sub(\"previous\", $scope.previous, $scope);\r\n\tpubSub.sub(\"next\", $scope.next, $scope);\r\n});"]}