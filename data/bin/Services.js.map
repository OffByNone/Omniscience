{"version":3,"sources":["../Services/AVTransportService.js","../Services/ConnectionManagerService.js","../Services/ContentDirectoryService.js","../Services/EventService.js","../Services/FileService.js","../Services/InformationService.js","../Services/JXON.js","../Services/LastChangeEventParser.js","../Services/MatchStickMessageGenerator.js","../Services/MediaReceiverRegistrarService.js","../Services/PersistenceService.js","../Services/PubSub.js","../Services/RenderingControlService.js","../Services/StubFactory.js","../Services/SubscriptionService.js","../Services/WfaWlanConfigService.js"],"names":[],"mappings":"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","file":"Services.js","sourcesContent":["window.omniscience.factory('avTransportService', function (eventService, subscriptionService, informationService) {\r\n\t\"use strict\";\r\n\r\n\tvar rawServiceType = 'urn:schemas-upnp-org:service:AVTransport:1'; //todo: move this to a constants file\r\n\tvar instanceId = 0; //todo: determine this dynamically\r\n\tvar speed = 1; //todo: make this a setable default\r\n\r\n\tfunction getService() { return informationService.get(rawServiceType); }\r\n\r\n\treturn {\r\n\t\tsetAvTransportUri: function setAvTransportUri(currentUri, currentUriMetadata) {\r\n\t\t\treturn eventService.callService(getService(), \"SetAVTransportURI\", { InstanceID: instanceId, CurrentURI: currentUri, CurrentURIMetaData: currentUriMetadata });\r\n\t\t},\r\n\t\tsetNextAvTransportUri: function setNextAvTransportUri(nextUri, nextUriMetadata) {\r\n\t\t\treturn eventService.callService(getService(), \"SetNextAVTransportURI\", { InstanceID: instanceId, NextURI: nextUri, NextURIMetaData: nextUriMetadata });\r\n\t\t},\r\n\t\tgetMediaInfo: function getMediaInfo() {\r\n\t\t\treturn eventService.callService(getService(), \"GetMediaInfo\", { InstanceID: instanceId });\r\n\t\t},\r\n\t\tgetTransportInfo: function getTransportInfo() {\r\n\t\t\treturn eventService.callService(getService(), \"GetTransportInfo\", { InstanceID: instanceId });\r\n\t\t},\r\n\t\tgetPositionInfo: function getPositionInfo() {\r\n\t\t\treturn eventService.callService(getService(), \"GetPositionInfo\", { InstanceID: instanceId });\r\n\t\t},\r\n\t\tgetDeviceCapabilities: function getDeviceCapabilities() {\r\n\t\t\treturn eventService.callService(getService(), \"GetDeviceCapabilities\", { InstanceID: instanceId });\r\n\t\t},\r\n\t\tgetTransportSettings: function getTransportSettings() {\r\n\t\t\treturn eventService.callService(getService(), \"GetTransportSettings\", { InstanceID: instanceId });\r\n\t\t},\r\n\t\tstop: function stop() {\r\n\t\t\treturn eventService.callService(getService(), \"Stop\", { InstanceID: instanceId });\r\n\t\t},\r\n\t\tplay: function play() {\r\n\t\t\treturn eventService.callService(getService(), \"Play\", { InstanceID: instanceId, Speed: speed });\r\n\t\t},\r\n\t\tpause: function pause() {\r\n\t\t\treturn eventService.callService(getService(), \"Pause\", { InstanceID: instanceId });\r\n\t\t},\r\n\t\tseek: function seek(unit, target) {\r\n\t\t\treturn eventService.callService(getService(), \"Seek\", { InstanceID: instanceId, Unit: unit, Target: target });\r\n\t\t},\r\n\t\tnext: function next() {\r\n\t\t\treturn eventService.callService(getService(), \"Next\", { InstanceID: instanceId });\r\n\t\t},\r\n\t\tprevious: function previous() {\r\n\t\t\treturn eventService.callService(getService(), \"Previous\", { InstanceID: instanceId });\r\n\t\t},\r\n\t\tsetPlayMode: function setPlayMode(newPlayMode) {\r\n\t\t\treturn eventService.callService(getService(), \"SetPlayMode\", { InstanceID: instanceId, NewPlayMode: newPlayMode });\r\n\t\t},\r\n\t\tgetServerIP: function getServerIP() {\r\n\t\t    return getService().serverIP;\r\n\t\t},\r\n\t\tgetCurrentTransportActions: function getCurrentTransportActions() {\r\n\t\t\treturn eventService.callService(getService(), \"GetCurrentTransportActions\", { InstanceID: instanceId });\r\n\t\t},\r\n\t\tsubscribe: function (genericEventCallback, lastChangeEventCallback) {\r\n\t\t\treturn subscriptionService.subscribe(getService(), genericEventCallback, lastChangeEventCallback);\r\n\t\t},\r\n\t\tunsubscribe: function () {\r\n\t\t\tvar service = getService();\r\n\t\t\treturn subscriptionService.unsubscribe(service.uuid, service.subscriptionId, service.eventSubUrl);\r\n\t\t}\r\n\t};\r\n});","window.omniscience.factory('connectionManagerService', function (eventService, informationService, subscriptionService){\r\n\t\"use strict\";\r\n\r\n\tvar connectionId = 0;\r\n\tvar constants = {\r\n\t\trawServiceType: 'urn:schemas-upnp-org:service:ConnectionManager:1',\r\n\t\tDLNA: {\r\n\t\t\t'DLNA.ORG_PN': 'mediaType', //\"MediaType\" Media file format profile, usually combination of container/video codec/audio codec/sometimes region\r\n\t\t\t'DLNA.ORG_OP': 'operations',\r\n\t\t\t'DLNA.ORG_PS': 'playSpeed',\r\n\t\t\t'DLNA.ORG_CI': 'conversionIndicator',\r\n\t\t\t'DLNA.ORG_FLAGS': 'flags',\r\n\t\t\t'DLNA.ORG_MAXSP': 'maxSP',\r\n\r\n\t\t\tmediaType: 'DLNA.ORG_PN',\r\n\t\t\toperations: 'DLNA.ORG_OP',\r\n\t\t\tplaySpeed: 'DLNA.ORG_PS',\r\n\t\t\tconversionIndicator: 'DLNA.ORG_CI',\r\n\t\t\tflags: 'DLNA.ORG_FLAGS',\r\n\t\t\tmaxSP: 'DLNA.ORG_MAXSP',\r\n\r\n\t\t\tflagValueMap: {\r\n\t\t\t\tsenderPaced: 31, //0x80000000\r\n\t\t\t\tlsopTimeBasedSeekSupported: 30, //0x40000000\r\n\t\t\t\tlsopByteBasedSeekSupported: 29, //0x20000000\r\n\t\t\t\tplaycontainerSupported: 28, //0x10000000\r\n\t\t\t\ts0IncreasingSupported: 27, //0x08000000\r\n\t\t\t\tsNIncreasingSupported: 26, //0x04000000\r\n\t\t\t\trtspPauseSupported: 25, //0x02000000\r\n\t\t\t\tstreamingTransferModeSupported: 24, //0x01000000\r\n\t\t\t\tinteractiveTransferModeSupported: 23, //0x00800000\r\n\t\t\t\tbackgroundTransferModeSupported: 22, //0x00400000\r\n\t\t\t\tconnectionStallingSupported: 21, //0x00200000\r\n\t\t\t\tdlnaVersion15Supported: 20 //0x00100000\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tfunction _parseProtocolResponse(protocolResponse){\r\n\t\tvar protocolInfo = [];\r\n\r\n\t\tif(!protocolResponse) return null;\r\n\r\n\t\tvar protocolResponseCSV = protocolResponse.split(',');\r\n\t\t// the elements contain a csv\r\n\t\t//csv has the format <protocol>:<network>:<contentFormat>:<additionalInfo>\r\n\t\t//contentformat can have n properties delimited by ;\r\n\r\n\t\tprotocolResponseCSV.map(row => {\r\n\t\t\tvar newRow = {};\r\n\t\t\tvar contentFormat, additionalInfo;\r\n\t\t\t[newRow.protocol, newRow.network, contentFormat, additionalInfo] = row.split(':');\r\n\t\t\tnewRow.contentFormat = _parseContentFormat(contentFormat);\r\n\t\t\tnewRow.additionalInfo = _parseAdditionalinfo(additionalInfo);\r\n\t\t\tprotocolInfo.push(newRow);\r\n\t\t});\r\n\t\treturn protocolInfo;\r\n\t}\r\n\tfunction _parseContentFormat(contentFormat){\r\n\t\tvar parsedContentFormat = {};\r\n\t\tvar containerTypeInfo;\r\n\t\tvar containerType;\r\n\t\t[parsedContentFormat.medium, containerTypeInfo] = contentFormat.split('/');\r\n\t\tcontainerTypeInfo = containerTypeInfo || \"\";\r\n\t\tparsedContentFormat.containerType = containerTypeInfo.split(\";\")[0];\r\n\t\tif(containerTypeInfo.indexOf(';') >= 0){\r\n\t\t\tparsedContentFormat.containerTypeInfo = {};\r\n\t\t\tvar extraParams = containerTypeInfo.split(';');\r\n\t\t\textraParams.shift();\r\n\t\t\textraParams.forEach(extraParam => {\r\n\t\t\t\tvar [key, value] = extraParam.split('=');\r\n\t\t\t\tparsedContentFormat.containerTypeInfo[key] = value;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn parsedContentFormat;\r\n\t}\r\n\tfunction _parseAdditionalinfo(additionalInfo){\r\n\t\tvar dlnaInfo = {};\r\n\t\tif(additionalInfo === \"*\") return additionalInfo;\r\n\t\tvar extraParams = additionalInfo.split(';');\r\n\t\textraParams.forEach(extraParam => {\r\n\t\t\tvar [key, value] = extraParam.split('=');\r\n\t\t\t[key, value ] = _parseDLNA(key, value);\r\n\t\t\tdlnaInfo[key] = value;\r\n\t\t});\r\n\r\n\t\treturn dlnaInfo;\r\n\t}\r\n\tfunction _parseDLNA(key, value){\r\n\t\tvar valueObject = {};\r\n\t\tvar newKey = constants.DLNA[key];\r\n\r\n\t\tif(key === constants.DLNA.mediaType){\r\n\t\t\treturn [newKey, value];\r\n\t\t}\r\n\t\tif(key === constants.DLNA.operations){\r\n\t\t\tvalueObject.canTimeSeekRange = value.charAt(0) === 1;\r\n\t\t\tvalueObject.canRange = value.charAt(1) === 1;\r\n\t\t\treturn [newKey, valueObject];\r\n\t\t}\r\n\t\tif(key === constants.DLNA.playSpeed){\r\n\t\t\tvalue = value === 1;\r\n\t\t\tnewKey = \"isValidPlaySpeed\";\r\n\t\t\treturn [newKey, value];\r\n\t\t}\r\n\t\tif(key === constants.DLNA.conversionIndicator){\r\n\t\t\tvalue = value === 1;\r\n\t\t\tnewKey = \"isTranscoded\";\r\n\t\t\treturn [newKey, value];\r\n\t\t}\r\n\t\tif(key === constants.DLNA.flags){\r\n\t\t\tvar flags = parseInt(value.substring(0, value.length-24), 16);//it is in hex and padded with 24 0s\r\n\t\t\tvar arrayOfBools = _arrayFromMask(flags);\r\n\t\t\tvar flagVals = constants.DLNA.flagValueMap;\r\n\t\t\tfor (var prop in flagVals)\r\n\t\t\t\tif(flagVals.hasOwnProperty(prop))\r\n\t\t\t\t\tvalueObject[prop] = arrayOfBools[flagVals[prop]];\r\n\t\t\treturn [newKey, valueObject];\r\n\t\t}\r\n\t\tif(key === constants.maxSP){\r\n\t\t\treturn [newKey, value];\r\n\t\t}\r\n\r\n\t\treturn [key, value];\r\n\t}\r\n\tfunction _arrayFromMask (nMask) {\r\n\t\t//https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators\r\n\t\tfor (var nShifted = nMask, aFromMask = []; nShifted;\r\n\t\t\t aFromMask.push(Boolean(nShifted & 1)), nShifted >>>= 1);\r\n\t\treturn aFromMask;\r\n\t}\r\n\r\n\tfunction getService() {\r\n\t\treturn informationService.get(constants.rawServiceType);\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetCurrentConnectionInfo: function getCurrentConnectionInfo(){\r\n\t\t\treturn eventService.callService(getService(), \"GetCurrentConnectionInfo\", { ConnectionID: connectionId });\r\n\t\t},\r\n\t\tgetProtocolInfo: function getProtocolInfo(){\r\n\t\t\treturn eventService.callService(getService(), \"GetProtocolInfo\").\r\n\t\t\t\tthen(response => {\r\n\t\t\t\t\treturn [].concat(_parseProtocolResponse(response.Sink, \"render\") || [], _parseProtocolResponse(response.Source, \"serve\") || []);\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tgetCurrentConnectionIds: function getCurrentConnectionIds(){\r\n\t\t\treturn eventService.callService(getService(), \"GetCurrentConnectionIDs\");\r\n\t\t},\r\n\t\tsubscribe: function(genericEventCallback, lastChangeEventCallback){\r\n\t\t\treturn subscriptionService.subscribe(getService(), genericEventCallback, lastChangeEventCallback);\r\n\t\t},\r\n\t\tunsubscribe: function(){\r\n\t\t\tvar service = getService();\r\n\t\t\treturn subscriptionService.unsubscribe(service.uuid, service.subscriptionId, service.eventSubUrl);\r\n\t\t},\r\n\t\tparseProtocolInfo: function(rawProtocolInfo){\r\n\t\t\treturn _parseProtocolResponse(rawProtocolInfo) || [];\r\n\t\t}\r\n\t}\r\n});","window.omniscience.factory('contentDirectoryService', function ($rootScope, eventService, subscriptionService, informationService) {\r\n\t\"use strict\";\r\n\r\n\tvar rawServiceType = 'urn:schemas-upnp-org:service:ContentDirectory:1';\r\n\tfunction getService() {\r\n\t\treturn informationService.get(rawServiceType);\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetInfo: function getInfo() {\r\n\t\t\tthis.getSearchCapabilities();\r\n\t\t\tthis.getSortCapabilities();\r\n\t\t\tthis.x_GetRemoteSharingStatus();\r\n\t\t},\r\n\t\tgetSearchCapabilities: function getSearchCapabilities() {\r\n\t\t\treturn eventService.callService(getService(), \"GetSearchCapabilities\");\r\n\t\t},\r\n\t\tgetSortCapabilities: function getSortCapabilities() {\r\n\t\t\treturn eventService.callService(getService(), \"GetSortCapabilities\");\r\n\t\t},\r\n\t\tgetSystemUpdateID: function getSystemUpdateID() {\r\n\t\t\treturn eventService.callService(getService(), \"GetSystemUpdateID\");\r\n\t\t},\r\n\t\tbrowse: function browse(objectId, browseFlag, filter, startingIndex, requestedCount, sortCriteria) {\r\n\t\t\treturn eventService.callService(getService(), \"Browse\", { ObjectId: objectId, BrowseFlag: browseFlag, Filter: filter, StartingIndex: startingIndex, RequestedCount: requestedCount, SortCriteria: sortCriteria });\r\n\t\t},\r\n\t\tsearch: function search(containerId, searchCriteria, filter, startingIndex, requestedCount, sortCriteria) {\r\n\t\t\treturn eventService.callService(getService(), \"Search\", { ContainerId: containerId, SearchCriteria: searchCriteria, Filter: filter, StartingIndex: startingIndex, RequestedCount: requestedCount, SortCriteria: sortCriteria });\r\n\t\t},\r\n\t\tx_GetRemoteSharingStatus: function x_GetRemoteSharingStatus() {\r\n\t\t\treturn eventService.callService(getService(), \"X_GetRemoteSharingStatus\");\r\n\t\t},\r\n\t\tsubscribe: function (genericEventCallback, lastChangeEventCallback) {\r\n\t\t\treturn subscriptionService.subscribe(getService(), genericEventCallback, lastChangeEventCallback);\r\n\t\t},\r\n\t\tunsubscribe: function () {\r\n\t\t\tvar service = getService();\r\n\t\t\treturn subscriptionService.unsubscribe(service.uuid, service.subscriptionId, service.eventSubUrl);\r\n\t\t}\r\n\t};\r\n});","window.omniscience.factory('eventService', function ($rootScope, $window, $q) {\r\n\t\"use strict\";\r\n\r\n\tvar emitPromises = {};\r\n\tvar subscriptions = {};\r\n\r\n\t$window.self.on(\"message\", (message) => {\r\n\t\tvar messageObj;\r\n\t\ttry {\r\n\t\t\tmessageObj = JSON.parse(message);\r\n\t\t}\r\n\t\tcatch (err) {\r\n\t\t\tconsole.log(message);\r\n\t\t\tconsole.log(err);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!Array.isArray(subscriptions[messageObj.eventType])) return; //nobody has subscribed yet, just return\r\n\t\tsubscriptions[messageObj.eventType].forEach(subscriptionCallback => $rootScope.$apply(subscriptionCallback(...messageObj.data)));\r\n\t});\r\n\r\n\r\n\tfunction generateQuickGuidish() { //e7 from http://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\r\n\t\tvar lut = []; for (var i = 0; i < 256; i++) { lut[i] = (i < 16 ? '0' : '') + (i).toString(16); }\r\n\t\tvar d0 = Math.random() * 0xffffffff | 0;\r\n\t\tvar d1 = Math.random() * 0xffffffff | 0;\r\n\t\tvar d2 = Math.random() * 0xffffffff | 0;\r\n\t\tvar d3 = Math.random() * 0xffffffff | 0;\r\n\t\treturn lut[d0 & 0xff] + lut[d0 >> 8 & 0xff] + lut[d0 >> 16 & 0xff] + lut[d0 >> 24 & 0xff] + '-' +\r\n\t\t\tlut[d1 & 0xff] + lut[d1 >> 8 & 0xff] + '-' + lut[d1 >> 16 & 0x0f | 0x40] + lut[d1 >> 24 & 0xff] + '-' +\r\n\t\t\tlut[d2 & 0x3f | 0x80] + lut[d2 >> 8 & 0xff] + '-' + lut[d2 >> 16 & 0xff] + lut[d2 >> 24 & 0xff] +\r\n\t\t\tlut[d3 & 0xff] + lut[d3 >> 8 & 0xff] + lut[d3 >> 16 & 0xff] + lut[d3 >> 24 & 0xff];\r\n\t}\r\n\tfunction on(eventType, callback) {\r\n\t\tsubscriptions[eventType] = subscriptions[eventType] || [];\r\n\t\tsubscriptions[eventType].push(callback);\r\n\t}\r\n\tfunction emit(eventType, ...args) {\r\n\t\tvar uniqueId = generateQuickGuidish();\r\n\t\tvar deferred = $q.defer();\r\n\r\n\t\temitPromises[uniqueId] = deferred;\r\n\r\n\t\tvar message = JSON.stringify({\r\n\t\t\teventType: eventType,\r\n\t\t\tdata: [uniqueId, ...args]\r\n\t\t});\r\n\r\n\t\t$window.self.postMessage(message);\r\n\r\n\t\treturn deferred.promise;\r\n\t}\r\n\tfunction callService(service, serviceMethod, data) {\r\n\t\treturn emit(\"CallService\", service, serviceMethod, data);\r\n\t}\r\n\ton(\"emitResponse\", function (uniqueId, ...args) {\r\n\t\tvar deferred = emitPromises[uniqueId];\r\n\t\tif (deferred) {\r\n\t\t\tdelete emitPromises[uniqueId];\r\n\t\t\tdeferred.resolve(...args);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tconsole.log(\"no deferred for the response\");\r\n\t\t}\r\n\t});\r\n\r\n\treturn {\r\n\t\ton: on,\r\n\t\temit: emit,\r\n\t\tcallService: callService\r\n\t};\r\n});","﻿window.omniscience.factory('fileService', function (eventService) {\r\n\t\"use strict\";\r\n\tvar rawServiceType = 'urn:schemas-upnp-org:service:AVTransport:1';\r\n\r\n\treturn {\r\n\t\tchooseFiles: function chooseFiles() {\r\n\t\t\treturn eventService.emit('chooseFiles');\r\n\t\t},\r\n\t\tshareFile: function shareFile(file, serverIP) {\r\n\t\t\treturn eventService.emit(\"shareFile\", file, serverIP).then(fileUri => fileUri);\r\n\t\t}\r\n\t};\r\n});","﻿window.omniscience.factory('informationService', function informationService() {\r\n\t\"use strict\";\r\n\r\n\tvar _services = {}; //key is service.type.raw\r\n\r\n\treturn {\r\n\t\tget: function (rawServiceType) {\r\n\t\t\tif (typeof rawServiceType === \"string\" && rawServiceType.length > 0)\r\n\t\t\t\treturn _services[rawServiceType];\r\n\t\t},\r\n\t\tput: function (serviceInformation) {\r\n\t\t\tif (typeof serviceInformation === \"object\" && typeof serviceInformation.type === \"object\"\r\n\t\t\t\t\t&& typeof serviceInformation.type.raw === \"string\" && serviceInformation.type.raw.length > 0)\r\n\t\t\t\t_services[serviceInformation.type.raw] = serviceInformation;\r\n\t\t},\r\n\t\tinit: function () {\r\n\t\t\t_services = {};\r\n\t\t}\r\n\t};\r\n});","﻿window.omniscience.factory('jxon', function () {\r\n\t\"use strict\";\r\n\t/*\r\n\t * JXON framework - Copyleft 2011 by Mozilla Developer Network\r\n\t *\r\n\t * https://developer.mozilla.org/en-US/docs/JXON\r\n\t *\r\n\t * This framework is released under the GNU Public License, version 3 or later.\r\n\t * http://www.gnu.org/licenses/gpl-3.0-standalone.html\r\n\t *\r\n\t * small modifications performed by the iD project:\r\n\t * https://github.com/openstreetmap/iD/commits/18aa33ba97b52cacf454e95c65d154000e052a1f/js/lib/jxon.js\r\n\t *\r\n\t * small modifications performed by user @bugreport0\r\n\t * https://github.com/tyrasd/JXON/pull/2/commits\r\n\t *\r\n\t * some additions and modifications by user @igord\r\n\t * https://github.com/tyrasd/JXON/pull/5/commits\r\n\t *\r\n\t * adapted for nodejs and npm by Martin Raifer <tyr.asd@gmail.com>\r\n\t */\r\n\r\n\t/*\r\n\t * Modifications:\r\n\t * - added config method that excepts objects with props:\r\n\t *   - valueKey (default: keyValue)\r\n\t *   - attrKey (default: keyAttributes)\r\n\t *   - attrPrefix (default: @)\r\n\t *   - lowerCaseTags (default: true)\r\n\t *   - trueIsEmpty (default: true)\r\n\t *   - autoDate (default: true)\r\n\t * - turning tag and attributes to lower case is optional\r\n\t * - optional turning boolean true to empty tag\r\n\t * - auto Date parsing is optional\r\n\t * - added parseXml method\r\n\t *\r\n   */\r\n\tvar sEmptyTrue = true;\r\n\r\n\treturn {\r\n\t\tfreezeGeneratedObject: false,\r\n\t\tstoreTextInSeparateObject: false,\r\n\t\ttextObjectName: \"text\",\r\n\t\tattributesObjectName: \"attributes\",\r\n\t\tstoreAttributesInSeparateObject: false,\r\n\t\tattributePrefix: \"\",\r\n\t\tnormalizeCasing: true,\r\n\t\tparseDates: true,\r\n\t\tremovePrefixes: true,\r\n\t\tincludePrefixedElements: true,\r\n\t\tnodeTypes: {\r\n\t\t\t4: \"CDATASection\",\r\n\t\t\t3: \"text\",\r\n\t\t\t1: \"Element\"\r\n\t\t},\r\n\r\n\r\n\t\tbuild: function (xml) {\r\n\t\t\tvar xmlActual = typeof xml === \"string\" ? this.stringToXml(xml) : xml;\r\n\t\t\txmlActual.normalize();\r\n\t\t\treturn this.createObject(xmlActual);\r\n\t\t},\r\n\t\tstringToXml: function (xmlStr) {\r\n\t\t\treturn (new window.DOMParser()).parseFromString(xmlStr, 'application/xml');\r\n\t\t},\r\n\t\tparseText: function (value) {\r\n\t\t\tif (value.trim() === \"\") return null;\r\n\t\t\tif (/^(true|false)$/i.test(value)) return value.toLowerCase() === \"true\";\r\n\t\t\tif (isFinite(value)) return parseFloat(value);\r\n\t\t\tif (this.parseDates && !isNaN(Date.parse(value))) return new Date(value);\r\n\t\t\treturn value;\r\n\t\t},\r\n\t\tcreateObject: function (parent) {\r\n\t\t\tvar childElements = this.getChildElements(parent.childNodes);\r\n\t\t\tvar jsonResult = this.parseAttributes(parent.attributes);\r\n\r\n\t\t\tchildElements.forEach((child) => {\r\n\t\t\t\tvar childObject = this.createObject(child);\r\n\t\t\t\tthis.addPropertyToObject(jsonResult, child.nodeName, childObject);\r\n\t\t\t});\r\n\r\n\t\t\tvar innerText = this.getInnerText(parent.childNodes);\r\n\r\n\t\t\tif (innerText != null) { //todo: make sure to have a test where innerText comes back as 0\r\n\t\t\t\tif (this.storeTextInSeparateObject || childElements.some(() => true))\r\n\t\t\t\t\tjsonResult[this.textObjectName] = innerText;\r\n\t\t\t\telse\r\n\t\t\t\t\tjsonResult = innerText;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.freezeGeneratedObject && childElements.some(() => true))\r\n\t\t\t\tObject.freeze(jsonResult);\r\n\r\n\t\t\treturn jsonResult;\r\n\t\t},\r\n\t\taddPropertyToObject: function (object, propertyName, propertyValue) {\r\n\r\n\t\t\tpropertyName = this.normalizePropertyName(propertyName);\r\n\r\n\t\t\tif (object.hasOwnProperty(propertyName)) {\r\n\t\t\t\tif (!Array.isArray(object[propertyName]))\r\n\t\t\t\t\tobject[propertyName] = [object[propertyName]];\r\n\r\n\t\t\t\tobject[propertyName].push(propertyValue);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tobject[propertyName] = propertyValue;\r\n\t\t},\r\n\t\tnormalizePropertyName: function (propertyName) {\r\n\t\t\tif (this.normalizeCasing) propertyName = propertyName.toLowerCase();\r\n\t\t\tif (this.removePrefixes && propertyName.indexOf(\":\") >= 0) propertyName = propertyName.split(\":\")[1];\r\n\r\n\t\t\treturn propertyName;\r\n\t\t},\r\n\t\tgetChildElements: function (childNodes) {\r\n\t\t\tvar children = [];\r\n\t\t\tfor (var childNode of childNodes) {\r\n\t\t\t\tif (this.nodeTypes[childNode.nodeType] === \"Element\" && (this.includePrefixedElements || !childNode.prefix))\r\n\t\t\t\t\tchildren.push(childNode)\r\n\t\t\t}\r\n\t\t\treturn children;\r\n\t\t},\r\n\t\tgetInnerText: function (childNodes) {\r\n\t\t\tvar innerText = \"\";\r\n\t\t\tfor (var childNode of childNodes) {\r\n\t\t\t\tvar nodeType = this.nodeTypes[childNode.nodeType];\r\n\r\n\t\t\t\tif (nodeType === \"CDATASection\" || nodeType === \"text\")\r\n\t\t\t\t\tinnerText += childNode.nodeValue.trim();\r\n\t\t\t}\r\n\r\n\t\t\treturn this.parseText(innerText);\r\n\t\t},\r\n\t\tparseAttributes: function (attributes) {\r\n\t\t\tvar attributesObj = {};\r\n\r\n\t\t\tif (!attributes) return {};\r\n\r\n\t\t\tfor (var i = 0; i < attributes.length; i++) {\r\n\t\t\t\tvar attribute = attributes.item(i);\r\n\t\t\t\tvar attributeName = attribute.name;\r\n\t\t\t\tif (this.normalizeCasing) attributeName = attributeName.toLowerCase();\r\n\t\t\t\tattributesObj[this.attributePrefix + attributeName] = this.parseText(attribute.value.trim());\r\n\t\t\t}\r\n\r\n\t\t\tif (this.storeAttributesInSeparateObject) {\r\n\t\t\t\tif (this.freezeGeneratedObject) Object.freeze(attributes);\r\n\t\t\t\tvar result = {};\r\n\t\t\t\tresult[this.attributesObjectName] = attributesObj;\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\r\n\t\t\treturn attributesObj;\r\n\t\t},\r\n\r\n\r\n\t\tconvertJsonToXml: function (xml, parentElement, parentObject) {\r\n\t\t\tvar value, oChild;\r\n\r\n\t\t\tif (parentObject.constructor === String || parentObject.constructor === Number || parentObject.constructor === Boolean) {\r\n\t\t\t\tparentElement.appendChild(xml.createTextNode(parentObject.toString())); /* verbosity level is 0 or 1 */\r\n\t\t\t\tif (parentObject === parentObject.valueOf()) { return; }\r\n\t\t\t} else if (parentObject.constructor === Date) {\r\n\t\t\t\tparentElement.appendChild(xml.createTextNode(parentObject.toGMTString()));\r\n\t\t\t}\r\n\r\n\t\t\tfor (var sName in parentObject) {\r\n\t\t\t\tvalue = parentObject[sName];\r\n\t\t\t\tif (isFinite(sName) || value instanceof Function) { continue; } /* verbosity level is 0 */\r\n\t\t\t\t// when it is _\r\n\t\t\t\tif (sName === this.textObjectName) {\r\n\t\t\t\t\tif (value !== null && value !== true) { parentElement.appendChild(xml.createTextNode(value.constructor === Date ? value.toGMTString() : String(value))); }\r\n\t\t\t\t} else if (sName === attributesPropertyName) { /* verbosity level is 3 */\r\n\t\t\t\t\tfor (var sAttrib in value) { parentElement.setAttribute(sAttrib, value[sAttrib]); }\r\n\t\t\t\t} else if (sName.charAt(0) === this.attributePrefix && sName !== this.attributePrefix + 'xmlns') {\r\n\t\t\t\t\tparentElement.setAttribute(sName.slice(1), value);\r\n\t\t\t\t} else if (value.constructor === Array) {\r\n\t\t\t\t\tfor (var i = 0; i < value.length; i++) {\r\n\t\t\t\t\t\toChild = xml.createElementNS(value[i][this.attributePrefix + 'xmlns'] || parentElement.namespaceURI, sName);\r\n\t\t\t\t\t\tconvertJsonToXml(xml, oChild, value[i]);\r\n\t\t\t\t\t\tparentElement.appendChild(oChild);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\toChild = xml.createElementNS((value || {})[this.attributePrefix + 'xmlns'] || parentElement.namespaceURI, sName);\r\n\t\t\t\t\tif (value instanceof Object) {\r\n\t\t\t\t\t\tconvertJsonToXml(xml, oChild, value);\r\n\t\t\t\t\t} else if (value !== null && value !== true) {\r\n\t\t\t\t\t\toChild.appendChild(xml.createTextNode(value.toString()));\r\n\t\t\t\t\t} else if (!sEmptyTrue && value === true) {\r\n\t\t\t\t\t\toChild.appendChild(xml.createTextNode(value.toString()));\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tparentElement.appendChild(oChild);\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tunbuild: function (jsonObject, namespaceUri /* optional */, qualifiedName /* optional */, documentType /* optional */) {\r\n\t\t\tvar xmlDocument = window.document.implementation.createDocument(namespaceUri || null, qualifiedName || \"\", documentType || null);\r\n\t\t\tconvertJsonToXml(xmlDocument, xmlDocument.documentElement || xmlDocument, jsonObject);\r\n\t\t\treturn xmlDocument;\r\n\t\t},\r\n\t\tconfig: function (o) {\r\n\t\t\tfor (var k in o) {\r\n\t\t\t\tswitch (k) {\r\n\t\t\t\t\tcase 'valueKey':\r\n\t\t\t\t\t\tthis.textObjectName = o.valueKey;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'attrKey':\r\n\t\t\t\t\t\tattributesPropertyName = o.attrKey;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'attrPrefix':\r\n\t\t\t\t\t\tthis.attributePrefix = o.attrPrefix;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'lowerCaseTags':\r\n\t\t\t\t\t\tthis.normalizeCasing = o.lowerCaseTags;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'trueIsEmpty':\r\n\t\t\t\t\t\tsEmptyTrue = o.trueIsEmpty;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'autoDate':\r\n\t\t\t\t\t\tthis.parseDates = o.autoDate;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'ignorePrefixedNodes':\r\n\t\t\t\t\t\tthis.includePrefixedElements = o.ignorePrefixedNodes;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\txmlToString: function (xmlObj) {\r\n\t\t\tif (typeof xmlObj.xml !== \"undefined\") {\r\n\t\t\t\treturn xmlObj.xml;\r\n\t\t\t} else {\r\n\t\t\t\tif (typeof window.XMLSerializer === \"undefined\") window.XMLSerializer = require(\"xmldom\").XMLSerializer;\r\n\t\t\t\treturn (new window.XMLSerializer()).serializeToString(xmlObj);\r\n\t\t\t}\r\n\t\t},\r\n\t\tstringToJs: function (str) {\r\n\t\t\tvar xmlObj = this.stringToXml(str);\r\n\t\t\treturn this.xmlToJson(xmlObj);\r\n\t\t},\r\n\t\tjsToString: this.stringify = function (jsonObject, namespaceUri /* optional */, qualifiedName /* optional */, documentType /* optional */) {\r\n\t\t\treturn this.xmlToString(\r\n\t\t\t  this.jsonToXml(jsonObject, namespaceUri, qualifiedName, documentType)\r\n\t\t\t);\r\n\t\t},\r\n\t};\r\n});","﻿window.omniscience.factory('lastChangeEventParser', function (){\r\n\t\"use strict\";\r\n\r\n\tvar domParser = new DOMParser();\r\n\r\n\tfunction getElements(xml, selector) { //lifted from /lib/XmlParser\r\n\t\treturn (xml && typeof xml.querySelectorAll === \"function\") ? Array.prototype.slice.call(xml.querySelectorAll(selector)) : [];\r\n\t}\r\n\r\n\treturn {\r\n\t\tparseEvent: function parseEvent(eventText) {\r\n\t\t\tvar eventXml = domParser.parseFromString(eventText, 'text/xml');\r\n\t\t\tvar lastChanges = getElements(eventXml, \"propertyset property LastChange\");\r\n\r\n\t\t\tif (lastChanges.length === 0) // this means that the event is not a last change event\r\n\t\t\t\treturn null; // return null so the subscriptionService can trigger a GenericUPnPEvent\r\n\r\n\t\t\tvar instances = [];\r\n\r\n\t\t\tlastChanges.map(lastChange => {\r\n\t\t\t\tvar eventString = lastChange.innerHTML\r\n\t\t\t\t\t\t\t\t\t\t\t\t.replace(/&lt;/g, '<')\r\n\t\t\t\t\t\t\t\t\t\t\t\t.replace(/&gt;/g, '>')\r\n\t\t\t\t\t\t\t\t\t\t\t\t.replace(/&quot;/g, '\"')\r\n\t\t\t\t\t\t\t\t\t\t\t\t.replace(/'/g, '&#39;')\r\n\t\t\t\t\t\t\t\t\t\t\t\t.replace(/&/g, '&amp;');\r\n\t\t\t\tvar eventXml = domParser.parseFromString(eventString, 'text/xml');\r\n\r\n\t\t\t\tvar instancesXml = getElements(eventXml, \"InstanceID\");\r\n\t\t\t\tinstancesXml.map((instanceXml) => {\r\n\t\t\t\t\tvar instance = {};\r\n\t\t\t\t\tArray.prototype.slice.call(instanceXml.children).forEach(child => {\r\n\t\t\t\t\t\tinstance[child.tagName] = child.attributes.getNamedItem('val').value;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tinstances.push(instance);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\treturn instances;\r\n\t\t}\r\n\t}\r\n});","window.omniscience.factory('matchstickMessageGenerator', function matchstickMessageGenerator() {\r\n\t\"use strict\";\r\n\treturn {\r\n\t\tbuild(command, type, extraData, protocolVersion) {\r\n\t\t\tvar message = {\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tcommand: command,\r\n\t\t\t\t\ttype: type\r\n\t\t\t\t},\r\n\t\t\t\tmessage_type: 'command',\r\n\t\t\t\tmeta: { reply: (command === 'query') },\r\n\t\t\t\tprotocol_version: protocolVersion || '1.0'\r\n\t\t\t};\r\n\r\n\t\t\tfor (var data in extraData)\r\n\t\t\t\tmessage.data[data] = extraData[data];\r\n\t\t\tvar messageStr = JSON.stringify(message);\r\n\t\t\tmessageStr = messageStr.length + \":\" + messageStr;\r\n\t\t\treturn messageStr;\r\n\t\t},\r\n\t\tbuildv2(command, parameters, protocolVersion) {\r\n\t\t\tvar message = {\r\n\t\t\t\tprotocol_version: protocolVersion || '1.0',\r\n\t\t\t\tmessage_type: 'command',\r\n\t\t\t\tmeta: { reply: (command === 'query') },\r\n\t\t\t\tdata: { command, parameters }\r\n\t\t\t};\r\n\r\n\t\t\tvar messageStr = JSON.stringify(message);\r\n\t\t\tmessageStr = messageStr.length + \":\" + messageStr;\r\n\t\t\treturn messageStr;\r\n\t\t}\r\n\t};\r\n});","window.omniscience.factory('mediaReceiverRegistrarService', function ($rootScope, eventService, subscriptionService, informationService) {\r\n\t\"use strict\";\r\n\r\n\tvar rawServiceType = 'urn:microsoft.com:service:X_MS_MediaReceiverRegistrar:1';\r\n\tfunction getService() {\r\n\t\treturn informationService.get(rawServiceType);\r\n\t}\r\n\r\n\treturn {\r\n\t\tisAuthorized: function getSearchCapabilities(DeviceId) {\r\n\t\t\treturn eventService.callService(getService(), \"GetSearchCapabilities\", { DeviceID: deviceId });\r\n\t\t},\r\n\t\tregisterservice: function getSortCapabilities(DeviceId) {\r\n\t\t\treturn eventService.callService(getService(), \"GetSortCapabilities\", { DeviceID: deviceId });\r\n\t\t},\r\n\t\tisValidated: function getSystemUpdateID(registrationReqMsg) {\r\n\t\t\treturn eventService.callService(getService(), \"GetSystemUpdateID\", { RegistrationReqMsg: registrationReqMsg });\r\n\t\t},\r\n\t\tsubscribe: function (genericEventCallback, lastChangeEventCallback) {\r\n\t\t\treturn subscriptionService.subscribe(getService(), genericEventCallback, lastChangeEventCallback);\r\n\t\t},\r\n\t\tunsubscribe: function () {\r\n\t\t\tvar service = getService();\r\n\t\t\treturn subscriptionService.unsubscribe(service.uuid, service.subscriptionId, service.eventSubUrl);\r\n\t\t}\r\n\t};\r\n});","﻿window.omniscience.factory('persistenceService', function persistenceService(eventService) {\r\n\t\"use strict\";\r\n\r\n\tvar _device = { state: {} };\r\n\r\n\treturn {\r\n\t\tload: function (serviceName) {\r\n\t\t\tif (!serviceName) throw new Error(\"argument 'serviceName' cannot be null\");\r\n\r\n\t\t\tif (!_device.state[serviceName])\r\n\t\t\t\t_device.state[serviceName] = {};\r\n\r\n\t\t\treturn _device.state[serviceName];\r\n\t\t},\r\n\t\tsave: function (serviceName, state) {\r\n\t\t\tif (!serviceName) throw new Error(\"argument 'serviceName' cannot be null\");\r\n\r\n\t\t\teventService.emit(\"saveState\", _device.id, serviceName, state);\r\n\t\t},\r\n\t\tinitialize: function (device) {\r\n\t\t\tif (!device) throw new Error(\"argument 'device' cannot be null\");\r\n\t\t\t_device = device;\r\n\t\t}\r\n\t};\r\n});","﻿window.omniscience.factory('pubSub', function ($rootScope) {\r\n\t\"use strict\";\r\n\r\n\treturn {\r\n\t\tpub: function (...args) {\r\n\t\t\t$rootScope.$emit(...args);\r\n\t\t},\r\n\t\tsub: function (message, func, scope) {\r\n\t\t\tvar unbind = $rootScope.$on(message, (unused, ...args) => func(...args));\r\n\t\t\tif (scope) scope.$on('$destroy', unbind);\r\n\t\t}\r\n\t};\r\n});","window.omniscience.factory('renderingControlService', function (eventService, informationService, subscriptionService) {\r\n\t\"use strict\";\r\n\r\n\tvar rawServiceType = 'urn:schemas-upnp-org:service:RenderingControl:1';\r\n\tvar instanceId = 0;\r\n\tvar channel = \"Master\";\r\n\r\n\tfunction getService() {\r\n\t\treturn informationService.get(rawServiceType);\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetMute: function getMute() {\r\n\t\t\treturn eventService\r\n\t\t\t\t.callService(getService(), \"GetMute\", { InstanceID: instanceId, Channel: channel })\r\n\t\t\t\t.then((response) => {\r\n\t\t\t\t\treturn response && response.hasOwnProperty(\"CurrentMute\") ? response.CurrentMute == 1 : response;\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tgetVolume: function getVolume() {\r\n\t\t\treturn eventService\r\n\t\t\t\t.callService(getService(), \"GetVolume\", { InstanceID: instanceId, Channel: channel })\r\n\t\t\t\t.then((response) => {\r\n\t\t\t\t\treturn response && response.hasOwnProperty(\"CurrentVolume\") ? response.CurrentVolume : response;\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tlistPresets: function listPresets() {\r\n\t\t\treturn eventService.callService(getService(), \"ListPresets\", { InstanceID: instanceId });\r\n\t\t},\r\n\t\tselectPresets: function selectPresets(presetName) {\r\n\t\t\treturn eventService.callService(getService(), \"ListPresets\", { InstanceID: instanceId, PresetName: presetName });\r\n\t\t},\r\n\t\tsetMute: function setMute(desiredMute) {\r\n\t\t\treturn eventService.callService(getService(), \"SetMute\", { InstanceID: instanceId, Channel: channel, DesiredMute: desiredMute });\r\n\t\t},\r\n\t\tsetVolume: function setVolume(desiredVolume) {\r\n\t\t\treturn eventService.callService(getService(), \"SetVolume\", { InstanceID: instanceId, Channel: channel, DesiredVolume: desiredVolume });\r\n\t\t},\r\n\t\tsubscribe: function (genericEventCallback, lastChangeEventCallback) {\r\n\t\t\treturn subscriptionService.subscribe(getService(), genericEventCallback, lastChangeEventCallback);\r\n\t\t},\r\n\t\tunsubscribe: function () {\r\n\t\t\tvar service = getService();\r\n\t\t\treturn subscriptionService.unsubscribe(service.uuid, service.subscriptionId, service.eventSubUrl);\r\n\t\t}\r\n\t};\r\n});","﻿window.omniscience.factory('stubFactory', function ($rootScope, eventService) {\r\n\t\"use strict\";\r\n\treturn {\r\n\t\tcreateServiceStub: function (serviceName, methods) {\r\n\t\t\tvar serviceStub = `omniscience.factory(${serivceName}, function ($rootScope, eventService) {\r\n\t\t\t\treturn {`;\r\n\r\n\t\t\tserviceStub += methods.map(method => {\r\n\t\t\t\tmethodStub += `${method.name}: function (service, `;\r\n\t\t\t\tmethodStub += method.parameters.map(parameter => parameter.name).join(\", \") + \"){\";\r\n\t\t\t\tvar paramsObject = method.parameters.map(parameter => `${parameter.name}: ${parameter.name}`).join(\", \");\r\n\t\t\t\tmethodStub += `return eventService.callService(service, \"${method.name}\", ${paramsObject}); }`;\r\n\t\t\t}).join(\", \");\r\n\r\n\t\t\tserviceStub += `};\r\n\t\t\t}); `;\r\n\t\t},\r\n\t\tcreateControllerStub: function (serviceName, methods, rawServiceType) {\r\n\t\t\tvar controllerStub = `omniscience.controller(\"${serviceName}\", function ConnectionManager($scope, ${serviceName}Service) {\r\n\t\t\t\t\"use strict\";\r\n\r\n\t\t\t\t$scope.service = $scope.device.services.filter(service => service.type.raw === \"${rawServiceType}\")[0];\r\n\r\n\t\t\t\t//sample calls\r\n\t\t\t\t`;\r\n\r\n\t\t\tvar methodStubs = methods.map(method => {\r\n\t\t\t\tmethodStub = `${serviceName}Service.${method.name}($scope.service, `;\r\n\t\t\t\tmethodStub += method.parameters.map(parameter => parameter.name).join(\", \") + \")\";\r\n\t\t\t\tmethodStub += \".then(response => console.log(response));\"\r\n\t\t\t}).reduce((prev, curr) => prev + \"\\n\" + curr);\r\n\r\n\t\t\tcontrollerStub += methodStubs + \"\\n});\";\r\n\t\t\treturn controllerStub;\r\n\t\t},\r\n\t\tcreateDirectiveStub: function (serviceName) {\r\n\t\t\treturn `angular.module(\"omniscience\").directive(\"${serviceName}\", function () {\r\n\t\t\t\t\t\treturn ({\r\n\t\t\t\t\t\t\tcontroller: \"${serviceName}Controller\",\r\n\t\t\t\t\t\t\tlink: link,\r\n\t\t\t\t\t\t\treplace: true,\r\n\t\t\t\t\t\t\trestrict: \"E\",\r\n\t\t\t\t\t\t\ttemplateUrl: \"../templates/${serviceName}.html\"\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tfunction link(scope, element, attributes) { }\r\n\t\t\t\t\t}); `;\r\n\t\t}\r\n\t};\r\n});","﻿window.omniscience.factory('subscriptionService', function ($q, $timeout, eventService, lastChangeEventParser, jxon) {\r\n\t\"use strict\";\r\n\r\n\tvar subscriptions = {};\r\n\r\n\tfunction addSubscription(service, timeoutInSeconds) {\r\n\t\tsubscriptions[service.uuid].timeout = $timeout(() => addSubscription(service, timeoutInSeconds), timeoutInSeconds * 900);/// make it 90% of the period so we don't resubscribe too late and potentially miss something\r\n\t\treturn eventService.emit(\"Subscribe\", service.eventSubUrl, service.uuid, service.serverIP, timeoutInSeconds, service.subscriptionId).then((subscriptionId) => {\r\n\t\t\tif (!subscriptionId) $timeout.cancel(subscriptions[service.uuid].timeout);\r\n\r\n\t\t\tservice.subscriptionId = subscriptionId;\r\n\t\t\treturn subscriptionId;\r\n\t\t});\r\n\t}\r\n\r\n\teventService.on(\"UPnPEvent\", (serviceUUID, eventXmlString) => {\r\n\t\tvar callbacks = subscriptions[serviceUUID].callbacks;\r\n\t\tif (!callbacks) return;\r\n\r\n\t\tvar lastChangeObj = lastChangeEventParser.parseEvent(eventXmlString);\r\n\r\n\t\tif (lastChangeObj)\r\n\t\t\tcallbacks.filter((callback) => typeof callback.lastChangeCallback === 'function')\r\n\t\t\t\t\t.forEach((callback) => callback.lastChangeCallback(lastChangeObj));\r\n\t\telse {\r\n\t\t\tvar eventJson = jxon.build(eventXmlString);\r\n\t\t\tif (eventJson.propertyset && eventJson.propertyset.property) {\r\n\t\t\t\tvar eventObj = {};\r\n\r\n\t\t\t\tif (!Array.isArray(eventJson.propertyset.property))\r\n\t\t\t\t\teventJson.propertyset.property = [eventJson.propertyset.property];\r\n\r\n\t\t\t\teventJson.propertyset.property.forEach(property => {\r\n\t\t\t\t\tfor (var key in property) {\r\n\t\t\t\t\t\tif (eventObj.hasOwnProperty(key)) {\r\n\t\t\t\t\t\t\tif (!Array.isArray(eventObj[key]))\r\n\t\t\t\t\t\t\t\teventObj[key] = [eventObj[key]];\r\n\r\n\t\t\t\t\t\t\teventObj[key].push(property[key]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\teventObj[key] = property[key];\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tcallbacks.filter((callback) => typeof callback.genericEventCallback === 'function')\r\n\t\t\t\t\t\t.forEach((callback) => callback.genericEventCallback([eventObj]));\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\treturn {\r\n\t\tsubscribe: function subscribe(service, genericEventCallback, lastChangeCallback, timeoutInSeconds) {\r\n\t\t\tif (typeof genericEventCallback !== \"function\" && typeof lastChangeCallback !== \"function\") throw new Error(\"Invalid argument exception.  Both parameters 'genericCallback' and 'lastChangeCallback' are null or not functions.  At least one of them must be a function.\");\r\n\t\t\tif (!service || typeof service !== \"object\") throw new Error(\"Invalid argument exception.  Parameter 'service' is either null or not an object.\");\r\n\t\t\tif (!service.uuid) throw new Error(\"Argument null exception service.uuid cannot be null.\");\r\n\t\t\tif (!service.eventSubUrl) throw new Error(\"Argument null exception service.eventSubUrl cannot be null.\");\r\n\r\n\t\t\tif (typeof subscriptions[service.uuid] === \"object\") {\r\n\t\t\t\tsubscriptions[service.uuid].callbacks.push({ genericEventCallback, lastChangeCallback });\r\n\t\t\t\treturn $q.reject(\"already subscribed, Your callbacks will still be executed.\");\r\n\t\t\t\t//todo: resolve with sub id.  While we have already subscribed, the first subscription response may not have returned yet, so we might not have the sub id\r\n\t\t\t}\r\n\r\n\t\t\tsubscriptions[service.uuid] = { callbacks: [{ genericEventCallback, lastChangeCallback }] };\r\n\t\t\treturn addSubscription(service, timeoutInSeconds || 900);\r\n\t\t},\r\n\t\tunsubscribe: function unsubscribe(serviceUUID, subscriptionId, eventSubUrl) {\r\n\t\t\tif (!serviceUUID) throw new Error(\"Argument null exception service.uuid cannot be null.\");\r\n\t\t\tif (!eventSubUrl) throw new Error(\"Argument null exception service.eventSubUrl cannot be null.\");\r\n\t\t\tif (!subscriptionId) return; //means we never subscribed in the first place\r\n\t\t\tif (!subscriptions[serviceUUID]) return; //if we have already unsubscribed\r\n\r\n\t\t\tif (!!subscriptions[serviceUUID].timeout) $timeout.cancel(subscriptions[serviceUUID].timeout);\r\n\t\t\tdelete subscriptions[serviceUUID];\r\n\r\n\t\t\treturn eventService.emit(\"Unsubscribe\", eventSubUrl, subscriptionId, serviceUUID)\r\n\t\t\t\t\t\t\t.then(() => subscriptionId = null);\r\n\t\t}\r\n\t}\r\n});","window.omniscience.factory('wfaWlanConfigService', function ($rootScope, eventService, subscriptionService, informationService) {\r\n\t\"use strict\";\r\n\r\n\tvar rawServiceType = 'urn:schemas-wifialliance-org:service:WFAWLANConfig:1';\r\n\r\n\tfunction getService() {\r\n\t\treturn informationService.get(rawServiceType);\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetInfo: function getInfo() {\r\n\t\t\tthis.getDeviceInfo();\r\n\t\t},\r\n\t\tdelAPSettings: function delAPSettings(newAPSettings) {\r\n\t\t\treturn eventService.callService(getService(), \"DelAPSettings\", { NewAPSettings: newAPSettings });\r\n\t\t},\r\n\t\tdelSTASettings: function delSTASettings(newSTASettings) {\r\n\t\t\treturn eventService.callService(getService(), \"DelSTASettings\", { NewAPSettings: newAPSettings });\r\n\t\t},\r\n\t\tgetAPSettings: function getAPSettings(newMessage) {\r\n\t\t\treturn eventService.callService(getService(), \"GetAPSettings\", { NewAPSettings: newAPSettings });\r\n\t\t},\r\n\t\tgetDeviceInfo: function getDeviceInfo() {\r\n\t\t\treturn eventService.callService(getService(), \"GetserviceInfo\", { NewAPSettings: newAPSettings });\r\n\t\t},\r\n\t\tgetSTASettings: function (newMessage) {\r\n\t\t\treturn eventService.callService(getService(), \"GetSTASettings\", { NewMessage: newMessage });\r\n\t\t},\r\n\t\tputMessage: function (newInMessage) {\r\n\t\t\treturn eventService.callService(getService(), \"PutMessage\", { NewInMessage: newInMessage });\r\n\t\t},\r\n\t\tputWLANResponse: function putWLANResponse(newMessage, newWLANEventType, newWLANEventMAC) {\r\n\t\t\treturn eventService.callService(getService(), \"PutWLANResponse\", { NewMessage: newMessage, NewWLANEventType: newWLANEventType, NewWLANEventMAC: newWLANEventMAC });\r\n\t\t},\r\n\t\trebootAP: function rebootAP(newAPSettings) {\r\n\t\t\treturn eventService.callService(getService(), \"RebootAP\", { NewAPSettings: newAPSettings });\r\n\t\t},\r\n\t\trebootSTA: function rebootSTA(newSTASettings) {\r\n\t\t\treturn eventService.callService(getService(), \"RebootSTA\", { NewSTASettings: newSTASettings });\r\n\t\t},\r\n\t\tresetAP: function resetAP(newMessage) {\r\n\t\t\treturn eventService.callService(getService(), \"ResetAP\", { NewMessage: newMessage });\r\n\t\t},\r\n\t\tresetSTA: function resetSTA(newMessage) {\r\n\t\t\treturn eventService.callService(getService(), \"ResetSTA\", { NewMessage: newMessage });\r\n\t\t},\r\n\t\tsetAPSettings: function setAPSettings(newAPSettings) {\r\n\t\t\treturn eventService.callService(getService(), \"SetAPSettings\", { NewAPSettings: newAPSettings });\r\n\t\t},\r\n\t\tsetSelectedRegistrar: function setSelecctedRegistrar(newMessage) {\r\n\t\t\treturn eventService.callService(getService(), \"SetSelectedRegistrar\", { NewMessage: newMessage });\r\n\t\t},\r\n\t\tsetSTASettings: function setSTASettings() {\r\n\t\t\treturn eventService.callService(getService(), \"SetSTASettings\");\r\n\t\t},\r\n\t\tsubscribe: function (genericEventCallback, lastChangeEventCallback) {\r\n\t\t\treturn subscriptionService.subscribe(getService(), genericEventCallback, lastChangeEventCallback);\r\n\t\t},\r\n\t\tunsubscribe: function () {\r\n\t\t\tvar service = getService();\r\n\t\t\treturn subscriptionService.unsubscribe(service.uuid, service.subscriptionId, service.eventSubUrl);\r\n\t\t}\r\n\t};\r\n});"]}