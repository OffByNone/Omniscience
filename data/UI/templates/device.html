<div class="container-fluid">
    <nav class="navbar">
        <div class="container-fluid">
            <div class="navbar-header">
                <div class="dropdown-toggle pointer" data-toggle="dropdown" role="button" aria-expanded="false">
					<img class="icon pull-left" ng-show="activeDevice.icons[0].url" ng-src="{{ activeDevice.icons[0].url }}" />
					<h2 class="active-device-header pull-left">
						<span>{{activeDevice.name}}</span>
						<span class="caret"></span>
					</h2>
                </div>
                <div class="list-group dropdown-menu pull-left" role="menu">
                    <a ng-href="#/device/{{device.id}}" ng-click="setActiveDevice(device)" ng-class="{active : device === activeDevice}" class="list-group-item" ng-repeat="device in devices | filter:selectedType | orderBy:'type'" id="{{ device.id }}">
                        <div class="media-body">
                            <h4 class="list-group-item-heading">{{ device.name }}</h4>
                            <p class="list-group-item-text">
                                <em>{{ device.model.name }}</em> by <em>{{ device.manufacturer.name }}</em>
                            </p>
                            <span class="capabilities">
                            <span class="glyphicon glyphicon-headphones" ng-show="device.audioCapable"></span>
                            <span class="glyphicon glyphicon-film" ng-show="device.videoCapable"></span>
                            <span class="glyphicon glyphicon-picture" ng-show="device.imageCapable"></span>
                            <span class="glyphicon glyphicon-blackboard" ng-show="device.mirrorCapable"></span>
                            </span>
                        </div>
                        <span class="media-right media-middle">
                        <img class="icon" ng-src="{{ device.icons[0].url }}" />
                    </span>
                    </a>
                </div>
            </div>
            <div class="collapse navbar-collapse" id="navbar-content">
				<div class="volume-speaker">
					<span class="glyphicon" ng-class="{'glyphicon-volume-off': activeDevice.isMuted, 'glyphicon-volume-up': !activeDevice.isMuted}" ng-click="toggleMute(activeDevice)"></span>
					<div class="volume-detail">
						<span class="glyphicon glyphicon-minus" ng-click="decrementVolume(activeDevice)"></span>
						<span>{{activeDevice.volume}}</span>
						<span class="glyphicon glyphicon-plus" ng-click="incrementVolume(activeDevice)"></span>
					</div>
				</div>
                <div class="btn-group" role="group">
                    <button type="button" ng-click="previous()" class="btn btn-default glyphicon glyphicon-backward"></button>
                    <button type="button" ng-click="play()" class="btn btn-default glyphicon glyphicon-play"></button>
                    <button type="button" ng-click="pause()" class="btn btn-default glyphicon glyphicon-pause"></button>
                    <button type="button" ng-click="next()" class="btn btn-default glyphicon glyphicon-forward"></button>
                    <button type="button" ng-click="stop()" class="btn btn-default glyphicon glyphicon-stop"></button>
                </div>
                <div class="progress">
                  <div class="progress-bar" role="progressbar" aria-valuenow="{{activeFile.currentTimeInSeconds}}" aria-valuemin="0" aria-valuemax="{{activeFile.durationInSeconds}}" style="width: {{currentFilePercent()}}%;">
                    <span class="sr-only">{{activeFile.currentTimeInSeconds}} seconds in</span>
                  </div>
                </div>
                <div class="file-time">
                    <span>{{activeFile.currentTime}}</span>
                    <span>/</span>
                    <span>{{activeFile.duration}}</span>
					<span>{{activeFile.name}}</span>
                </div>
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="" class="nav navbar-nav navbar-right">About</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
	<div class="row">
        <div class="container col-md-2">
            <ul class="playlist list-group">
                <li class="playlist-title list-group-item clearfix">
                    <span class="pull-left">Playlist</span>
                    <span class="glyphicon pull-right" ng-class="{'glyphicon-minus': filePickerOpen, 'glyphicon-plus': !filePickerOpen}" ng-click="filePickerOpen = !filePickerOpen"  data-target="#add-file" data-toggle="collapse" aria-expanded="false" aria-controls="add-file"></span>
                </li>
                <li class="list-group-item no-padding">
                    <div class="collapse in" id="add-file">
                        <div class="clearfix list-padding">
                            <div class="form-group">
                                <label>Enter URL</label>
                                <div><input class="form-control" type="url" ng-value="filePicker.url.path" /></div>
                            </div>
                            <div class="form-group">
                                <label>Choose File</label>
                                <div class="input-group">
                                    <span class="input-group-btn">
                                        <button class="btn btn-default" ng-click="pickLocalFile()" type="button">Browse</button>
                                    </span>
                                    <input type="text" ng-value="filePicker.localFile.path" class="form-control" /> <!-- make readonly but don't apply readonly styles -->
                                </div>
                            </div>
                            <div class="form-group pull-right">
                            <button type="button" data-toggle="collapse" data-target="#add-file" class="btn btn-default" ng-click="launch(); filePickerOpen = false;">Play</button>
                            <button type="button" class="btn btn-default" ng-click="addToPlaylist()">Add To Playlist</button>
                        </div>
                        </div>
                    </div>
                </li>
                <li ng-class="{active : file === activeFile}" ng-dblclick="launch(file)" class="list-group-item playlist-item clearfix" ng-repeat="file in playlist">
                    <!--todo: show buttons only on hover -->
                    <!--todo: add handle to drag and drop reorder -->
                    <h4 class="list-group-item-heading pull-left">{{ file.name }}</h4>
                    <button type="button" ng-click="removeFromPlaylist(file)" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                </li>
                <li class="playlist-footer list-group-item clearfix">
                    <button class="btn btn-default pull-left" ng-click="clearPlaylist()">Clear Playlist</button>
                    <span class="pull-right glyphicon glyphicon-repeat" ng-click="playback.repeat = !playback.repeat" ng-class="{active: playback.repeat}"></span>
                    <span class="pull-right glyphicon glyphicon-random" ng-click="randomizePlaylist()"></span>
                </li>
            </ul>
        </div>
        <div class="container col-md-10">
            <div class="media">
                <div class="media-left media-top">
                    <img class="icon" ng-show="activeDevice.icons[0].url" ng-src="{{ activeDevice.icons[0].url }}" />
                </div>
                <div class="media-body">
                    <h1 class="active-device-header">
                        <a ng-href="{{activeDevice.webPage}}" ng-show="activeDevice.webPage">{{activeDevice.name}}</a>
                        <span ng-hide="activeDevice.webPage">{{activeDevice.name}}</span>
                        <small>
                            <em>
                                <a ng-show="activeDevice.model.url" ng-href="{{activeDevice.model.url}}">{{activeDevice.model.name}}</a>
                                <span ng-hide="activeDevice.model.url">{{activeDevice.model.name}}</span>
                            </em>
                            by
                            <em>
                                <a ng-show="activeDevice.manufacturer.url" ng-href="{{activeDevice.manufacturer.url}}">{{activeDevice.manufacturer.name}}</a>
                                <span ng-hide="activeDevice.manufacturer.url">{{activeDevice.manufacturer.name}}</span>
                            </em>
                        </small>
                    </h1>
                </div>
            </div>
            <div role="tabpanel">
                <!-- Nav tabs -->
                <ul class="nav nav-tabs" role="tablist">
                    <li role="presentation" class=" active"><a data-target="#info" aria-controls="info" role="tab" data-toggle="tab">Info</a></li>
                    <li role="presentation"><a data-target="#supported-formats" aria-controls="supported-formats" role="tab" data-toggle="tab">Supported Formats</a></li>
                    <li role="presentation"><a data-target="#services" aria-controls="services" role="tab" data-toggle="tab">Services</a></li>
                    <li role="presentation"><a data-target="#settings" aria-controls="settings" role="tab" data-toggle="tab">Settings</a></li>
                    <li role="presentation" class=" pull-right"><a data-target="#debug" aria-controls="debug" role="tab" data-toggle="tab">Debug</a></li>
                </ul>
                <!-- Tab panes -->
                <div class="tab-content">
                    <div role="tabpanel" class="tab-pane active" id="info">
                        <div class="well">
                            <div class="row" ng-show="activeDevice.type.name">
                                <div class="col-md-1">Type</div>
                                <div class="col-md-11">
                                    {{activeDevice.type.name}}
                                    <em ng-show="activeDevice.type.urn">{{activeDevice.type.urn}}</em>
                                </div>
                            </div>
                            <div class="row" ng-show="activeDevice.udn">
                                <div class="col-md-1">UUID</div>
                                <div class="col-md-11">{{activeDevice.udn}}</div>
                            </div>
                            <div class="row" ng-show="activeDevice.upnpVersion">
                                <div class="col-md-1">UPnP</div>
                                <div class="col-md-11">v{{activeDevice.upnpVersion}}</div>
                            </div>
                            <div class="row" ng-show="activeDevice.langauge">
                                <div class="col-md-1">Language</div>
                                <div class="col-md-11">{{activeDevice.langauge}}</div>
                            </div>
                            <div class="row" ng-show="activeDevice.macAddress">
                                <div class="col-md-1">Mac Address</div>
                                <div class="col-md-11">{{activeDevice.macAddress}}</div>
                            </div>
                            <div class="row" ng-show="activeDevice.timezone">
                                <div class="col-md-1">Timezone</div>
                                <div class="col-md-11">{{activeDevice.timezone}}</div>
                            </div>
                            <div class="row" ng-show="activeDevice.softwareVersion">
                                <div class="col-md-1">Software Ver</div>
                                <div class="col-md-11">{{activeDevice.softwareVersion}}</div>
                            </div>
                            <div class="row" ng-show="activeDevice.serialNumber">
                                <div class="col-md-1">Serial Num</div>
                                <div class="col-md-11">{{activeDevice.serialNumber}}</div>
                            </div>
                            <div class="row" ng-show="activeDevice.model.number">
                                <div class="col-md-1">Model Num</div>
                                <div class="col-md-11">{{activeDevice.model.number}}</div>
                            </div>
                            <div class="row" ng-show="activeDevice.model.description">
                                <div class="col-md-1">Model Desc</div>
                                <div class="col-md-11">{{activeDevice.model.description}}</div>
                            </div>
                            <div ng-show="activeDevice.showAudioPicker || activeDevice.showVideoPicker" class="picker group">
                                    <div class="picker-left">
                                             Enter a url <br />
                                             Choose a file
                                    </div>
                                    <div class="picker-right">
                                        <input class="input-url" type="text">
                                        <br />
                                        <button class="filePicker" ng-click="pickLocalFile(activeDevice)">Browse</button>
                                    </div>
                                    <div ng-show="activeDevice.file">
                                        <div>{{activeDevice.file.name}}</div>
                                        <button class="launch" ng-click="launch(activeDevice)">Launch</button>
                                    </div>
                                </div>
                            <div ng-show="activeDevice.isRunning" class="controls">
                                        <div class="slider"></div>
                                        <span class="glyphicon glyphicon-fast-backward"></span>
                                        <span ng-click="executeCommand(activeDevice,'play')" class="glyphicon glyphicon-play"></span>
                                        <span ng-click="executeCommand(activeDevice,'pause')" class="glyphicon glyphicon-pause"></span>
                                        <span class="glyphicon glyphicon-fast-forward"></span>
                                        <span ng-click="executeCommand(activeDevice,'stop')" class="glyphicon glyphicon-stop"><i></i></span>
                                    </div>
                        </div>
                    </div>
                    <div role="tabpanel" class="tab-pane" id="supported-formats">
                        <div ng-show="activeDevice.imageCapable != null || activeDevice.videoCapable != null || activeDevice.audioCapable != null || activeDevice.mirrorCapable != null">
                            <ul class="nav nav-tabs" role="tablist">
                                <li role="presentation" ng-show="activeDevice.videoCapable != null" ng-class="{active: activeDevice.videoCapable != null}">
                                    <a role="tab" data-toggle="tab" class="pointer" data-target="#capabilities-tab-video-sink" aria-controls="video sink">Video Sink</a>
                                </li>
                                <li role="presentation" ng-show="activeDevice.audioCapable != null" ng-class="{active: activeDevice.videoCapable == null && activeDevice.audioCapable != null}">
                                    <a role="tab" data-toggle="tab" class="pointer" data-target="#capabilities-tab-audio-sink" aria-controls="audio sink">Audio Sink</a>
                                </li>
                                <li role="presentation" ng-show="activeDevice.imageCapable != null" ng-class="{active: activeDevice.videoCapable == null && activeDevice.audioCapable == null && activeDevice.imageCapable != null}">
                                    <a role="tab" data-toggle="tab" class="pointer" data-target="#capabilities-tab-image-sink" aria-controls="image sink">Image Sink</a>
                                </li>
                                <li role="presentation" ng-show="activeDevice.mirrorCapable != null" ng-class="{active: activeDevice.videoCapable == null && activeDevice.audioCapable == null && activeDevice.imageCapable == null && activeDevice.mirrorCapable != null}">
                                    <a role="tab" data-toggle="tab" class="pointer" data-target="#capabilities-tab-mirror" aria-controls="mirror">Mirror</a>
                                </li>
                            </ul>
                            <div class="tab-content tab-padding">
                                <div role="tabpanel" ng-show="activeDevice.videoCapable != null" class="tab-pane" id="capabilities-tab-video-sink" ng-class="{active: activeDevice.videoCapable != null}">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>Protocol</th>
                                                <th>Network</th>
                                                <th>Medium</th>
                                                <th>Container Type</th>
                                                <th>Container Type Info</th>
                                                <th>Additional Info</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="info in activeDevice.rawProtocolInfo.sink | filter:'video'">
                                                <td>{{info.protocol}}</td>
                                                <td>{{info.network}}</td>
                                                <td>{{info.contentFormat.medium}}</td>
                                                <td>{{info.contentFormat.containerType}}</td>
                                                <td>{{JSON.stringify(info.contentFormat.containerTypeInfo)}}</td>
                                                <td>{{info.additionalInfo}}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div role="tabpanel" ng-show="activeDevice.audioCapable != null" class="tab-pane" id="capabilities-tab-audio-sink" ng-class="{active: activeDevice.videoCapable == null && activeDevice.audioCapable != null}">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>Protocol</th>
                                                <th>Network</th>
                                                <th>Medium</th>
                                                <th>Container Type</th>
                                                <th>Container Type Info</th>
                                                <th>Additional Info</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="info in activeDevice.rawProtocolInfo.sink | filter:'audio'">
                                                <td>{{info.protocol}}</td>
                                                <td>{{info.network}}</td>
                                                <td>{{info.contentFormat.medium}}</td>
                                                <td>{{info.contentFormat.containerType}}</td>
                                                <td>{{info.contentFormat.containerTypeInfo}}</td>
                                                <td>{{info.additionalInfo}}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div role="tabpanel" ng-show="activeDevice.imageCapable != null" class="tab-pane" id="capabilities-tab-image-sink" ng-class="{active: activeDevice.videoCapable == null && activeDevice.audioCapable == null && activeDevice.imageCapable != null}">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>Protocol</th>
                                                <th>Network</th>
                                                <th>Medium</th>
                                                <th>Container Type</th>
                                                <th>Container Type Info</th>
                                                <th>Additional Info</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="info in activeDevice.rawProtocolInfo.sink | filter:'image'">
                                                <td>{{info.protocol}}</td>
                                                <td>{{info.network}}</td>
                                                <td>{{info.contentFormat.medium}}</td>
                                                <td>{{info.contentFormat.containerType}}</td>
                                                <td>{{JSON.stringify(info.contentFormat.containerTypeInfo)}}</td>
                                                <td>{{info.additionalInfo}}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div role="tabpanel" ng-show="activeDevice.mirrorCapable != null" class="tab-pane" id="capabilities-tab-mirror" ng-class="{active: activeDevice.videoCapable == null && activeDevice.audioCapable == null && activeDevice.imageCapable == null && activeDevice.mirrorCapable != null}">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>Protocol</th>
                                                <th>Network</th>
                                                <th>Medium</th>
                                                <th>Container Type</th>
                                                <th>Container Type Info</th>
                                                <th>Additional Info</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="info in activeDevice.rawProtocolInfo.sink | filter:'mirror'">
                                                <td>{{info.protocol}}</td>
                                                <td>{{info.network}}</td>
                                                <td>{{info.contentFormat.medium}}</td>
                                                <td>{{info.contentFormat.containerType}}</td>
                                                <td>{{JSON.stringify(info.contentFormat.containerTypeInfo)}}</td>
                                                <td>{{info.additionalInfo}}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <h4 ng-hide="activeDevice.imageCapable != null || activeDevice.videoCapable != null || activeDevice.audioCapable != null || activeDevice.mirrorCapable != null">
                                    Unknown
                                </h4>
                    </div>
                    <div role="tabpanel" class="tab-pane" id="services">
                        <div class="well">
                            <ul class="nav nav-tabs" role="tablist">
                                <li role="presentation" ng-class="{active: $first}" ng-repeat="service in activeDevice.services">
                                    <a data-target="#{{service.htmlId}}" class="pointer" aria-controls="{{service.type.name}}" role="tab" data-toggle="tab">{{service.type.name}}</a>
                                </li>
                            </ul>
                            <div class="tab-content tab-padding">
                                <div ng-repeat="service in activeDevice.services" role="tabpanel" ng-class="{active: $first}" class="tab-pane" id="{{service.htmlId}}">
                                    <div class="row" ng-show="service.type.urn">
                                        <div class="col-md-1">Type</div>
                                        <div class="col-md-11">{{service.type.urn}}</div>
                                    </div>
                                    <div class="row" ng-show="service.id">
                                        <div class="col-md-1">Id</div>
                                        <div class="col-md-11">{{service.id}}</div>
                                    </div>
                                    <div class="row padding-top" ng-show="service.scpdUrl || service.controlUrl || service.eventSubUrl">
                                        <ul class="col-md-12 list-inline">
                                            <li ng-show="service.scpdUrl"><a ng-href="{{service.scpdUrl}}">Control Point Document</a></li>
                                            <li ng-show="service.controlUrl"><a ng-href="{{service.controlUrl}}">Control</a></li>
                                            <li ng-show="service.eventSubUrl"><a ng-href="{{service.eventSubUrl}}">Event Subscription</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div role="tabpanel" class="tab-pane" id="settings">
                        <div class="well"></div>
                    </div>
                    <div role="tabpanel" class="tab-pane" id="debug">
                        <div class="well">
                            <div class="row" ng-show="activeDevice.ssdpDescription">
                                <div class="col-md-12">
                                    <a ng-href="{{activeDevice.ssdpDescription}}" ng-show="activeDevice.ssdpDescription">SSDP Description</a>
                                </div>
                            </div>
                            <div class="row" ng-show="activeDevice.icons">
                                <h4 class="col-md-1">Icons</h4>
                                <div class="col-md-11">
                                    <ul class="row list-inline">
                                        <li ng-repeat="icon in activeDevice.icons">
                                            <img ng-src="{{icon.url}}" />
                                            <div class="row" ng-show="icon.mimeType">
                                                <div class="col-md-12">{{icon.mimeType}}</div>
                                            </div>
                                            <div class="row">
                                                <h5 class="col-md-12">
                                                    {{icon.width}}<small>x</small>{{icon.height}}<small>x</small>{{icon.depth}}
                                                </h5>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">&nbsp;</div>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <button type="button" ng-show="activeDevice.rawDiscoveryInfo" class="btn btn-default" data-toggle="collapse" data-target="#raw-discovery-info">
                                        raw discovery info
                                    </button>
                                    <button type="button" ng-show="activeDevice.rawProtocolInfo" class="btn btn-default" data-toggle="collapse" data-target="#raw-protocol-info">
                                        raw protocol info
                                    </button>
                                    <div class="collapse" id="raw-discovery-info">{{activeDevice.rawDiscoveryInfo}}</div>
                                    <div class="collapse" id="raw-protocol-info">{{activeDevice.rawProtocolInfo}}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
	</div>
</div>